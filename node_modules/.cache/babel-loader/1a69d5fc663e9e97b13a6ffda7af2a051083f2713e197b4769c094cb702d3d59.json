{"ast":null,"code":"var _jsxFileName = \"/home/kokoi/sol-wager-app/frontend/src/App.jsx\",\n  _s = $RefreshSig$();\n// src/App.jsx\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport \"./App.css\";\nimport sentences from \"./sentences\";\nimport { useConnection, useWallet } from \"@solana/wallet-adapter-react\";\nimport { WalletMultiButton } from \"@solana/wallet-adapter-react-ui\";\nimport { LAMPORTS_PER_SOL, PublicKey, Transaction } from \"@solana/web3.js\";\nimport socket from \"./socket\";\nimport * as anchor from \"@coral-xyz/anchor\";\nimport idl from \"./idl/typeracer_escrow.json\";\nimport { setProvider } from \"./solana\";\nimport { buildInitializeAndDepositIxns, buildJoinAndDepositIxn, buildCancelIxn, buildResolveIxn } from \"./escrow\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function App() {\n  _s();\n  const {\n    connection\n  } = useConnection();\n  const wallet = useWallet();\n  const {\n    publicKey,\n    connected\n  } = wallet;\n  const walletAddress = (publicKey === null || publicKey === void 0 ? void 0 : publicKey.toBase58()) || \"\";\n\n  // keep latest wallet address\n  const walletAddressRef = useRef(walletAddress);\n  useEffect(() => {\n    walletAddressRef.current = walletAddress;\n  }, [walletAddress]);\n\n  // Anchor + provider setup\n  useEffect(() => {\n    if (connected && connection) {\n      const prov = new anchor.AnchorProvider(connection, wallet, {\n        preflightCommitment: \"confirmed\",\n        commitment: \"confirmed\"\n      });\n      anchor.setProvider(prov);\n      setProvider(wallet);\n    }\n  }, [connected, connection, wallet]);\n\n  // wallet balance\n  const [walletBalance, setWalletBalance] = useState(0);\n  useEffect(() => {\n    if (connection && publicKey) {\n      connection.getBalance(publicKey).then(lamports => {\n        setWalletBalance(lamports / LAMPORTS_PER_SOL);\n      });\n    }\n  }, [connection, publicKey]);\n\n  // game state\n  const [wager, setWager] = useState(1);\n  const [openMatches, setOpenMatches] = useState([]);\n  const [currentMatch, setCurrentMatch] = useState(null);\n  const [matchStatus, setMatchStatus] = useState(\"waiting\");\n\n  // 90s cancel‑delay\n  const [matchCreatedAt, setMatchCreatedAt] = useState(0);\n  const [timeLeft, setTimeLeft] = useState(0);\n  useEffect(() => {\n    if (!matchCreatedAt) return;\n    const tick = () => {\n      const elapsed = Date.now() - matchCreatedAt;\n      const secs = Math.ceil((90000 - elapsed) / 1000);\n      setTimeLeft(secs > 0 ? secs : 0);\n    };\n    tick();\n    const iv = setInterval(tick, 1000);\n    return () => clearInterval(iv);\n  }, [matchCreatedAt]);\n\n  // race state\n  const [sentence, setSentence] = useState(\"\");\n  const [inputValue, setInputValue] = useState(\"\");\n  const [playerProgress, setPlayerProgress] = useState(0);\n  const [opponentProgress, setOpponentProgress] = useState(0);\n  const [countdown, setCountdown] = useState(3);\n  const [raceResult, setRaceResult] = useState(null);\n  const [isInputDisabled, setIsInputDisabled] = useState(false);\n  const [isAccepting, setIsAccepting] = useState(false);\n  const [opponentWallet, setOpponentWallet] = useState(null);\n\n  // error detection state\n  const [hasError, setHasError] = useState(false);\n\n  // chat\n  const [chatMessages, setChatMessages] = useState([]);\n  const [chatInput, setChatInput] = useState(\"\");\n  const inputRef = useRef(null);\n  const API = process.env.REACT_APP_API_URL;\n  const [lastProgTime, setLastProgTime] = useState(Date.now());\n  const [lastProg, setLastProg] = useState(0);\n  const MAX_CPS = 20;\n\n  // helper to pick sentence\n  const chooseSentence = id => sentences[Array.from(id).reduce((a, c) => a + c.charCodeAt(0), 0) % sentences.length];\n\n  // fetch open matches (exclude accepted)\n  const fetchOpenMatches = async () => {\n    try {\n      const res = await fetch(`${API}/wagers`);\n      const wm = await res.json();\n      setOpenMatches(wm.filter(m => !m.accepter));\n    } catch {}\n  };\n\n  // reset all state\n  const resetGame = () => {\n    setCurrentMatch(null);\n    setMatchStatus(\"waiting\");\n    setSentence(\"\");\n    setInputValue(\"\");\n    setPlayerProgress(0);\n    setOpponentProgress(0);\n    setCountdown(3);\n    setRaceResult(null);\n    setIsInputDisabled(false);\n    setOpponentWallet(null);\n    setLastProg(0);\n    setLastProgTime(Date.now());\n    setMatchCreatedAt(0);\n    setTimeLeft(0);\n    setHasError(false);\n    fetchOpenMatches();\n  };\n\n  // socket listeners\n  useEffect(() => {\n    socket.connect();\n    socket.on(\"openMatches\", wm => setOpenMatches(wm.filter(m => !m.accepter)));\n    socket.on(\"newMatch\", m => setOpenMatches(os => [...os, m].filter(x => !x.accepter)));\n    socket.on(\"removeMatch\", id => setOpenMatches(os => os.filter(m => m.id !== id)));\n    socket.on(\"startMatch\", ({\n      id,\n      players\n    }) => {\n      setPlayerProgress(0);\n      setOpponentProgress(0);\n      setCurrentMatch({\n        id,\n        amount: (currentMatch === null || currentMatch === void 0 ? void 0 : currentMatch.amount) || 0,\n        creator: players[0],\n        accepter: players[1],\n        nonce: currentMatch === null || currentMatch === void 0 ? void 0 : currentMatch.nonce\n      });\n      setMatchStatus(\"ready\");\n      setSentence(chooseSentence(id));\n      setCountdown(3);\n      setOpponentWallet(players.find(w => w !== walletAddressRef.current));\n      setHasError(false);\n    });\n    socket.on(\"opponentProgress\", ({\n      wallet: w,\n      progress\n    }) => {\n      if (w !== walletAddressRef.current) setOpponentProgress(progress);\n    });\n    socket.on(\"raceEnd\", ({\n      winner,\n      progressMap\n    }) => {\n      setMatchStatus(\"finished\");\n      setIsInputDisabled(true);\n      setRaceResult({\n        result: winner === walletAddressRef.current ? \"win\" : \"lose\"\n      });\n      if (progressMap) {\n        var _progressMap$walletAd, _progressMap$opponent;\n        setPlayerProgress((_progressMap$walletAd = progressMap[walletAddressRef.current]) !== null && _progressMap$walletAd !== void 0 ? _progressMap$walletAd : 0);\n        setOpponentProgress((_progressMap$opponent = progressMap[opponentWallet]) !== null && _progressMap$opponent !== void 0 ? _progressMap$opponent : 0);\n      }\n    });\n    socket.on(\"chat\", setChatMessages);\n    socket.on(\"opponentLeft\", resetGame);\n    fetchOpenMatches();\n    return () => {\n      socket.removeAllListeners();\n      socket.disconnect();\n    };\n  }, []);\n\n  // countdown to race start\n  useEffect(() => {\n    if (matchStatus === \"ready\" && countdown > 0) {\n      const t = setTimeout(() => setCountdown(c => c - 1), 1000);\n      return () => clearTimeout(t);\n    } else if (matchStatus === \"ready\" && countdown === 0) {\n      var _inputRef$current;\n      setMatchStatus(\"racing\");\n      setIsInputDisabled(false);\n      (_inputRef$current = inputRef.current) === null || _inputRef$current === void 0 ? void 0 : _inputRef$current.focus();\n    }\n  }, [countdown, matchStatus]);\n\n  // cancel allowed after delay\n  const CAN_CANCEL = timeLeft === 0 && matchStatus === \"waiting\";\n\n  // ─── CREATE MATCH ────────────────────────────────────────\n  async function createMatch() {\n    if (!connected) return alert(\"Connect wallet\");\n    try {\n      const lamports = Math.floor(wager * LAMPORTS_PER_SOL);\n      const nonce = Math.floor(Math.random() * 1000000);\n      const {\n        ixInit,\n        ixDeposit,\n        escrowPda\n      } = await buildInitializeAndDepositIxns(lamports, publicKey, nonce);\n      const tx = new Transaction().add(ixInit, ixDeposit);\n      await wallet.sendTransaction(tx, connection);\n      const id = escrowPda.toBase58();\n      await fetch(`${API}/wagers`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          id,\n          vault: id,\n          amount: Number(wager),\n          creator: walletAddressRef.current,\n          feePercent: 5,\n          nonce\n        })\n      });\n      setCurrentMatch({\n        id,\n        amount: Number(wager),\n        creator: walletAddressRef.current,\n        nonce\n      });\n      setMatchCreatedAt(Date.now());\n      setMatchStatus(\"waiting\");\n      socket.emit(\"joinMatch\", id);\n      fetchOpenMatches();\n    } catch (e) {\n      console.error(\"Create error:\", e);\n      alert(\"Create match failed:\\n\" + e.message);\n    }\n  }\n\n  // ─── ACCEPT MATCH ───────────────────────────────────────\n  async function acceptMatch(m) {\n    if (!connected) return alert(\"Connect wallet\");\n    setIsAccepting(true);\n    try {\n      const ix = await buildJoinAndDepositIxn(m.id);\n      await wallet.sendTransaction(new Transaction().add(ix), connection);\n      setMatchStatus(\"ready\");\n      setSentence(chooseSentence(m.id));\n      setCountdown(3);\n      await fetch(`${API}/wagers/${m.id}/accept`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          accepter: walletAddressRef.current\n        })\n      });\n      setCurrentMatch({\n        ...m,\n        accepter: walletAddressRef.current\n      });\n      socket.emit(\"joinMatch\", m.id);\n      setHasError(false);\n    } catch (e) {\n      console.error(\"Accept error:\", e);\n      alert(\"Accept error:\\n\" + e.message);\n      setCurrentMatch(null);\n    } finally {\n      setIsAccepting(false);\n    }\n  }\n\n  // ─── CANCEL MATCH ───────────────────────────────────────\n  async function cancelMatch(m) {\n    if (!CAN_CANCEL) return;\n    try {\n      const ix = await buildCancelIxn(m.id, m.creator, m.accepter || m.creator);\n      await wallet.sendTransaction(new Transaction().add(ix), connection);\n      await fetch(`${API}/wagers/${m.id}/cancel`, {\n        method: \"POST\"\n      });\n      resetGame();\n    } catch (e) {\n      console.error(\"Cancel error:\", e);\n      alert(\"Cancel error:\\n\" + e.message);\n    }\n  }\n\n  // ─── TYPING HANDLER w/ error detection ──────────────────\n  function handleInput(e) {\n    if (isInputDisabled) return;\n    if (e.type === \"paste\") {\n      e.preventDefault();\n      return;\n    }\n    const val = e.target.value;\n    // if user types something not matching the sentence prefix:\n    if (!sentence.startsWith(val)) {\n      setHasError(true);\n      return; // don't update anything\n    }\n    // valid so far:\n    setHasError(false);\n    const now = Date.now();\n    const raw = Math.min(1, val.length / sentence.length);\n    const delta = raw - lastProg;\n    const dt = (now - lastProgTime) / 1000;\n    const cps = dt > 0 ? delta * sentence.length / dt : 0;\n    if (cps > MAX_CPS) return;\n    setLastProg(raw);\n    setLastProgTime(now);\n    setInputValue(val);\n    setPlayerProgress(raw);\n    socket.emit(\"progress\", {\n      matchId: currentMatch.id,\n      wallet: walletAddressRef.current,\n      progress: raw\n    });\n    if (val === sentence) {\n      fetch(`${API}/wagers/${currentMatch.id}/complete`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          winner: walletAddressRef.current\n        })\n      });\n      setMatchStatus(\"finished\");\n      setIsInputDisabled(true);\n      setRaceResult({\n        result: \"win\"\n      });\n    }\n  }\n\n  // ─── RENDERERS ──────────────────────────────────────────\n\n  const renderMatchmaking = () => /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"matchmaking\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Create a Match\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"Wager (SOL):\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        min: \"0.01\",\n        step: \"0.01\",\n        value: wager,\n        onChange: e => setWager(Number(e.target.value))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: createMatch,\n      disabled: !wager || wager <= 0,\n      children: \"Create Match\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        marginTop: 20\n      },\n      children: \"Open Matches\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 364,\n      columnNumber: 7\n    }, this), openMatches.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No open matches. Create one!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: openMatches.map(m => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [m.id.slice(0, 6), \"\\u2026 | \", m.amount, \" SOL\", \" \", m.creator === walletAddressRef.current ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => cancelMatch(m),\n            disabled: !CAN_CANCEL,\n            style: {\n              marginLeft: 10,\n              opacity: CAN_CANCEL ? 1 : 0.5\n            },\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 19\n          }, this), !CAN_CANCEL && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: \"0.9em\",\n              color: \"#666\",\n              marginTop: 4\n            },\n            children: [\"Cancellation enabled in \", timeLeft, \"s\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => acceptMatch(m),\n          disabled: !!currentMatch || isAccepting,\n          style: {\n            marginLeft: 10\n          },\n          children: isAccepting ? \"Accepting…\" : \"Accept\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 17\n        }, this)]\n      }, m.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 348,\n    columnNumber: 5\n  }, this);\n  const renderWaiting = () => /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"waiting-section\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Waiting for opponent\\u2026\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => cancelMatch(currentMatch),\n        disabled: !CAN_CANCEL,\n        style: {\n          opacity: CAN_CANCEL ? 1 : 0.5\n        },\n        children: \"Cancel Match\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 9\n      }, this), !CAN_CANCEL && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: \"0.9em\",\n          color: \"#666\",\n          marginTop: 4\n        },\n        children: [\"Cancellation enabled in \", timeLeft, \"s\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 404,\n    columnNumber: 5\n  }, this);\n  const renderRace = () => /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"race-section\",\n    children: [matchStatus === \"ready\" && /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Starting in \", countdown]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 35\n    }, this), matchStatus === \"racing\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sentence-display\",\n        children: sentence\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        ref: inputRef,\n        type: \"text\",\n        value: inputValue,\n        onChange: handleInput,\n        onPaste: handleInput,\n        placeholder: \"Start typing\\u2026\",\n        disabled: isInputDisabled,\n        autoFocus: true,\n        style: hasError ? {\n          borderColor: \"red\"\n        } : {}\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 11\n      }, this), hasError && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: \"red\",\n          marginTop: 4\n        },\n        children: \"Mistake detected \\u2013 please correct your typing.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"track\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lane\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"car car-player\",\n            style: {\n              left: `${playerProgress * 100}%`\n            },\n            children: \"\\uD83D\\uDE97\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 447,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 446,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lane\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"car car-opponent\",\n            style: {\n              left: `${opponentProgress * 100}%`\n            },\n            children: \"\\uD83C\\uDFCE\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), matchStatus === \"finished\" && (raceResult === null || raceResult === void 0 ? void 0 : raceResult.result) === \"win\" && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"results results-win\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          fontSize: \"2rem\"\n        },\n        children: \"\\uD83C\\uDFC6 You Won!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 468,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: async () => {\n          try {\n            const ix = await buildResolveIxn(currentMatch.id, walletAddressRef.current);\n            const tx = new Transaction().add(ix);\n            await wallet.sendTransaction(tx, connection);\n            resetGame();\n          } catch (e) {\n            console.error(\"Claim error:\", e);\n            alert(\"Payout error:\\n\" + e.message);\n          }\n        },\n        children: \"Claim Winnings\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 469,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 467,\n      columnNumber: 9\n    }, this), matchStatus === \"finished\" && (raceResult === null || raceResult === void 0 ? void 0 : raceResult.result) === \"lose\" && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"results results-lose\",\n      style: {\n        textAlign: \"center\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          fontSize: \"2rem\",\n          color: \"#c0392b\"\n        },\n        children: \"\\uD83D\\uDE22 You Lost!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 492,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Better luck next time!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 493,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: resetGame,\n        children: \"Back to Matches\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 494,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 491,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 424,\n    columnNumber: 5\n  }, this);\n  const renderChat = () => /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"chat-section\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Chat\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 502,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-messages\",\n      style: {\n        maxHeight: 150,\n        overflowY: \"auto\"\n      },\n      children: chatMessages.map((msg, i) => /*#__PURE__*/_jsxDEV(\"p\", {\n        className: msg.sender === walletAddressRef.current ? \"self\" : \"other\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: [msg.sender.slice(0, 6), \"\\u2026:\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 512,\n          columnNumber: 13\n        }, this), \" \", msg.message]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 508,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 503,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      value: chatInput,\n      onChange: e => setChatInput(e.target.value),\n      onKeyDown: e => e.key === \"Enter\" && socket.emit(\"message\", {\n        matchId: currentMatch.id,\n        sender: walletAddressRef.current,\n        message: chatInput\n      }) && setChatInput(\"\")\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 516,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => {\n        socket.emit(\"message\", {\n          matchId: currentMatch.id,\n          sender: walletAddressRef.current,\n          message: chatInput\n        });\n        setChatInput(\"\");\n      },\n      disabled: !chatInput.trim(),\n      children: \"Send\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 529,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 501,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Type Racer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 548,\n        columnNumber: 9\n      }, this), connected ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"wallet-info\",\n        children: [walletAddressRef.current.slice(0, 6), \"\\u2026 (\", walletBalance.toFixed(2), \" SOL)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 550,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(WalletMultiButton, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 555,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 547,\n      columnNumber: 7\n    }, this), !connected && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Please connect your wallet to play.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 559,\n      columnNumber: 22\n    }, this), connected && !currentMatch && renderMatchmaking(), connected && currentMatch && matchStatus === \"waiting\" && renderWaiting(), connected && currentMatch && (matchStatus === \"ready\" || matchStatus === \"racing\" || matchStatus === \"finished\") && renderRace(), connected && currentMatch && matchStatus === \"finished\" && renderChat()]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 546,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"aa6UxMlKAM7a0d8HxfXCsRtoJbY=\", false, function () {\n  return [useConnection, useWallet];\n});\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","sentences","useConnection","useWallet","WalletMultiButton","LAMPORTS_PER_SOL","PublicKey","Transaction","socket","anchor","idl","setProvider","buildInitializeAndDepositIxns","buildJoinAndDepositIxn","buildCancelIxn","buildResolveIxn","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","connection","wallet","publicKey","connected","walletAddress","toBase58","walletAddressRef","current","prov","AnchorProvider","preflightCommitment","commitment","walletBalance","setWalletBalance","getBalance","then","lamports","wager","setWager","openMatches","setOpenMatches","currentMatch","setCurrentMatch","matchStatus","setMatchStatus","matchCreatedAt","setMatchCreatedAt","timeLeft","setTimeLeft","tick","elapsed","Date","now","secs","Math","ceil","iv","setInterval","clearInterval","sentence","setSentence","inputValue","setInputValue","playerProgress","setPlayerProgress","opponentProgress","setOpponentProgress","countdown","setCountdown","raceResult","setRaceResult","isInputDisabled","setIsInputDisabled","isAccepting","setIsAccepting","opponentWallet","setOpponentWallet","hasError","setHasError","chatMessages","setChatMessages","chatInput","setChatInput","inputRef","API","process","env","REACT_APP_API_URL","lastProgTime","setLastProgTime","lastProg","setLastProg","MAX_CPS","chooseSentence","id","Array","from","reduce","a","c","charCodeAt","length","fetchOpenMatches","res","fetch","wm","json","filter","m","accepter","resetGame","connect","on","os","x","players","amount","creator","nonce","find","w","progress","winner","progressMap","result","_progressMap$walletAd","_progressMap$opponent","removeAllListeners","disconnect","t","setTimeout","clearTimeout","_inputRef$current","focus","CAN_CANCEL","createMatch","alert","floor","random","ixInit","ixDeposit","escrowPda","tx","add","sendTransaction","method","headers","body","JSON","stringify","vault","Number","feePercent","emit","e","console","error","message","acceptMatch","ix","cancelMatch","handleInput","type","preventDefault","val","target","value","startsWith","raw","min","delta","dt","cps","matchId","renderMatchmaking","className","children","fileName","_jsxFileName","lineNumber","columnNumber","step","onChange","onClick","disabled","style","marginTop","map","slice","marginLeft","opacity","fontSize","color","renderWaiting","renderRace","ref","onPaste","placeholder","autoFocus","borderColor","left","textAlign","renderChat","maxHeight","overflowY","msg","i","sender","onKeyDown","key","trim","toFixed","_c","$RefreshReg$"],"sources":["/home/kokoi/sol-wager-app/frontend/src/App.jsx"],"sourcesContent":["// src/App.jsx\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport \"./App.css\";\nimport sentences from \"./sentences\";\nimport { useConnection, useWallet } from \"@solana/wallet-adapter-react\";\nimport { WalletMultiButton } from \"@solana/wallet-adapter-react-ui\";\nimport {\n  LAMPORTS_PER_SOL,\n  PublicKey,\n  Transaction,\n} from \"@solana/web3.js\";\nimport socket from \"./socket\";\nimport * as anchor from \"@coral-xyz/anchor\";\nimport idl from \"./idl/typeracer_escrow.json\";\nimport { setProvider } from \"./solana\";\nimport {\n  buildInitializeAndDepositIxns,\n  buildJoinAndDepositIxn,\n  buildCancelIxn,\n  buildResolveIxn,\n} from \"./escrow\";\n\nexport default function App() {\n  const { connection } = useConnection();\n  const wallet = useWallet();\n  const { publicKey, connected } = wallet;\n  const walletAddress = publicKey?.toBase58() || \"\";\n\n  // keep latest wallet address\n  const walletAddressRef = useRef(walletAddress);\n  useEffect(() => {\n    walletAddressRef.current = walletAddress;\n  }, [walletAddress]);\n\n  // Anchor + provider setup\n  useEffect(() => {\n    if (connected && connection) {\n      const prov = new anchor.AnchorProvider(connection, wallet, {\n        preflightCommitment: \"confirmed\",\n        commitment: \"confirmed\",\n      });\n      anchor.setProvider(prov);\n      setProvider(wallet);\n    }\n  }, [connected, connection, wallet]);\n\n  // wallet balance\n  const [walletBalance, setWalletBalance] = useState(0);\n  useEffect(() => {\n    if (connection && publicKey) {\n      connection.getBalance(publicKey).then((lamports) => {\n        setWalletBalance(lamports / LAMPORTS_PER_SOL);\n      });\n    }\n  }, [connection, publicKey]);\n\n  // game state\n  const [wager, setWager] = useState(1);\n  const [openMatches, setOpenMatches] = useState([]);\n  const [currentMatch, setCurrentMatch] = useState(null);\n  const [matchStatus, setMatchStatus] = useState(\"waiting\");\n\n  // 90s cancel‑delay\n  const [matchCreatedAt, setMatchCreatedAt] = useState(0);\n  const [timeLeft, setTimeLeft] = useState(0);\n  useEffect(() => {\n    if (!matchCreatedAt) return;\n    const tick = () => {\n      const elapsed = Date.now() - matchCreatedAt;\n      const secs = Math.ceil((90_000 - elapsed) / 1000);\n      setTimeLeft(secs > 0 ? secs : 0);\n    };\n    tick();\n    const iv = setInterval(tick, 1000);\n    return () => clearInterval(iv);\n  }, [matchCreatedAt]);\n\n  // race state\n  const [sentence, setSentence] = useState(\"\");\n  const [inputValue, setInputValue] = useState(\"\");\n  const [playerProgress, setPlayerProgress] = useState(0);\n  const [opponentProgress, setOpponentProgress] = useState(0);\n  const [countdown, setCountdown] = useState(3);\n  const [raceResult, setRaceResult] = useState(null);\n  const [isInputDisabled, setIsInputDisabled] = useState(false);\n  const [isAccepting, setIsAccepting] = useState(false);\n  const [opponentWallet, setOpponentWallet] = useState(null);\n\n  // error detection state\n  const [hasError, setHasError] = useState(false);\n\n  // chat\n  const [chatMessages, setChatMessages] = useState([]);\n  const [chatInput, setChatInput] = useState(\"\");\n  const inputRef = useRef(null);\n\n  const API = process.env.REACT_APP_API_URL;\n  const [lastProgTime, setLastProgTime] = useState(Date.now());\n  const [lastProg, setLastProg] = useState(0);\n  const MAX_CPS = 20;\n\n  // helper to pick sentence\n  const chooseSentence = (id) =>\n    sentences[\n      Array.from(id).reduce((a, c) => a + c.charCodeAt(0), 0) %\n        sentences.length\n    ];\n\n  // fetch open matches (exclude accepted)\n  const fetchOpenMatches = async () => {\n    try {\n      const res = await fetch(`${API}/wagers`);\n      const wm = await res.json();\n      setOpenMatches(wm.filter((m) => !m.accepter));\n    } catch {}\n  };\n\n  // reset all state\n  const resetGame = () => {\n    setCurrentMatch(null);\n    setMatchStatus(\"waiting\");\n    setSentence(\"\");\n    setInputValue(\"\");\n    setPlayerProgress(0);\n    setOpponentProgress(0);\n    setCountdown(3);\n    setRaceResult(null);\n    setIsInputDisabled(false);\n    setOpponentWallet(null);\n    setLastProg(0);\n    setLastProgTime(Date.now());\n    setMatchCreatedAt(0);\n    setTimeLeft(0);\n    setHasError(false);\n    fetchOpenMatches();\n  };\n\n  // socket listeners\n  useEffect(() => {\n    socket.connect();\n\n    socket.on(\"openMatches\", (wm) =>\n      setOpenMatches(wm.filter((m) => !m.accepter))\n    );\n    socket.on(\"newMatch\", (m) =>\n      setOpenMatches((os) => [...os, m].filter((x) => !x.accepter))\n    );\n    socket.on(\"removeMatch\", (id) =>\n      setOpenMatches((os) => os.filter((m) => m.id !== id))\n    );\n\n    socket.on(\"startMatch\", ({ id, players }) => {\n      setPlayerProgress(0);\n      setOpponentProgress(0);\n      setCurrentMatch({\n        id,\n        amount: currentMatch?.amount || 0,\n        creator: players[0],\n        accepter: players[1],\n        nonce: currentMatch?.nonce,\n      });\n      setMatchStatus(\"ready\");\n      setSentence(chooseSentence(id));\n      setCountdown(3);\n      setOpponentWallet(players.find((w) => w !== walletAddressRef.current));\n      setHasError(false);\n    });\n\n    socket.on(\"opponentProgress\", ({ wallet: w, progress }) => {\n      if (w !== walletAddressRef.current) setOpponentProgress(progress);\n    });\n\n    socket.on(\"raceEnd\", ({ winner, progressMap }) => {\n      setMatchStatus(\"finished\");\n      setIsInputDisabled(true);\n      setRaceResult({\n        result: winner === walletAddressRef.current ? \"win\" : \"lose\",\n      });\n      if (progressMap) {\n        setPlayerProgress(progressMap[walletAddressRef.current] ?? 0);\n        setOpponentProgress(progressMap[opponentWallet] ?? 0);\n      }\n    });\n\n    socket.on(\"chat\", setChatMessages);\n    socket.on(\"opponentLeft\", resetGame);\n\n    fetchOpenMatches();\n    return () => {\n      socket.removeAllListeners();\n      socket.disconnect();\n    };\n  }, []);\n\n  // countdown to race start\n  useEffect(() => {\n    if (matchStatus === \"ready\" && countdown > 0) {\n      const t = setTimeout(() => setCountdown((c) => c - 1), 1000);\n      return () => clearTimeout(t);\n    } else if (matchStatus === \"ready\" && countdown === 0) {\n      setMatchStatus(\"racing\");\n      setIsInputDisabled(false);\n      inputRef.current?.focus();\n    }\n  }, [countdown, matchStatus]);\n\n  // cancel allowed after delay\n  const CAN_CANCEL = timeLeft === 0 && matchStatus === \"waiting\";\n\n  // ─── CREATE MATCH ────────────────────────────────────────\n  async function createMatch() {\n    if (!connected) return alert(\"Connect wallet\");\n    try {\n      const lamports = Math.floor(wager * LAMPORTS_PER_SOL);\n      const nonce = Math.floor(Math.random() * 1_000_000);\n      const { ixInit, ixDeposit, escrowPda } =\n        await buildInitializeAndDepositIxns(lamports, publicKey, nonce);\n\n      const tx = new Transaction().add(ixInit, ixDeposit);\n      await wallet.sendTransaction(tx, connection);\n\n      const id = escrowPda.toBase58();\n      await fetch(`${API}/wagers`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          id,\n          vault: id,\n          amount: Number(wager),\n          creator: walletAddressRef.current,\n          feePercent: 5,\n          nonce,\n        }),\n      });\n\n      setCurrentMatch({\n        id,\n        amount: Number(wager),\n        creator: walletAddressRef.current,\n        nonce,\n      });\n      setMatchCreatedAt(Date.now());\n      setMatchStatus(\"waiting\");\n      socket.emit(\"joinMatch\", id);\n      fetchOpenMatches();\n    } catch (e) {\n      console.error(\"Create error:\", e);\n      alert(\"Create match failed:\\n\" + e.message);\n    }\n  }\n\n  // ─── ACCEPT MATCH ───────────────────────────────────────\n  async function acceptMatch(m) {\n    if (!connected) return alert(\"Connect wallet\");\n    setIsAccepting(true);\n    try {\n      const ix = await buildJoinAndDepositIxn(m.id);\n      await wallet.sendTransaction(new Transaction().add(ix), connection);\n\n      setMatchStatus(\"ready\");\n      setSentence(chooseSentence(m.id));\n      setCountdown(3);\n\n      await fetch(`${API}/wagers/${m.id}/accept`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ accepter: walletAddressRef.current }),\n      });\n      setCurrentMatch({ ...m, accepter: walletAddressRef.current });\n      socket.emit(\"joinMatch\", m.id);\n      setHasError(false);\n    } catch (e) {\n      console.error(\"Accept error:\", e);\n      alert(\"Accept error:\\n\" + e.message);\n      setCurrentMatch(null);\n    } finally {\n      setIsAccepting(false);\n    }\n  }\n\n  // ─── CANCEL MATCH ───────────────────────────────────────\n  async function cancelMatch(m) {\n    if (!CAN_CANCEL) return;\n    try {\n      const ix = await buildCancelIxn(\n        m.id,\n        m.creator,\n        m.accepter || m.creator\n      );\n      await wallet.sendTransaction(new Transaction().add(ix), connection);\n      await fetch(`${API}/wagers/${m.id}/cancel`, { method: \"POST\" });\n      resetGame();\n    } catch (e) {\n      console.error(\"Cancel error:\", e);\n      alert(\"Cancel error:\\n\" + e.message);\n    }\n  }\n\n  // ─── TYPING HANDLER w/ error detection ──────────────────\n  function handleInput(e) {\n    if (isInputDisabled) return;\n    if (e.type === \"paste\") {\n      e.preventDefault();\n      return;\n    }\n    const val = e.target.value;\n    // if user types something not matching the sentence prefix:\n    if (!sentence.startsWith(val)) {\n      setHasError(true);\n      return; // don't update anything\n    }\n    // valid so far:\n    setHasError(false);\n\n    const now = Date.now();\n    const raw = Math.min(1, val.length / sentence.length);\n    const delta = raw - lastProg;\n    const dt = (now - lastProgTime) / 1000;\n    const cps = dt > 0 ? (delta * sentence.length) / dt : 0;\n    if (cps > MAX_CPS) return;\n\n    setLastProg(raw);\n    setLastProgTime(now);\n    setInputValue(val);\n    setPlayerProgress(raw);\n    socket.emit(\"progress\", {\n      matchId: currentMatch.id,\n      wallet: walletAddressRef.current,\n      progress: raw,\n    });\n\n    if (val === sentence) {\n      fetch(`${API}/wagers/${currentMatch.id}/complete`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ winner: walletAddressRef.current }),\n      });\n      setMatchStatus(\"finished\");\n      setIsInputDisabled(true);\n      setRaceResult({ result: \"win\" });\n    }\n  }\n\n  // ─── RENDERERS ──────────────────────────────────────────\n\n  const renderMatchmaking = () => (\n    <section className=\"matchmaking\">\n      <h2>Create a Match</h2>\n      <label>\n        Wager (SOL):\n        <input\n          type=\"number\"\n          min=\"0.01\"\n          step=\"0.01\"\n          value={wager}\n          onChange={(e) => setWager(Number(e.target.value))}\n        />\n      </label>\n      <button onClick={createMatch} disabled={!wager || wager <= 0}>\n        Create Match\n      </button>\n\n      <h2 style={{ marginTop: 20 }}>Open Matches</h2>\n      {openMatches.length === 0 ? (\n        <p>No open matches. Create one!</p>\n      ) : (\n        <ul>\n          {openMatches.map((m) => (\n            <li key={m.id}>\n              {m.id.slice(0, 6)}… | {m.amount} SOL{\" \"}\n              {m.creator === walletAddressRef.current ? (\n                <>\n                  <button\n                    onClick={() => cancelMatch(m)}\n                    disabled={!CAN_CANCEL}\n                    style={{ marginLeft: 10, opacity: CAN_CANCEL ? 1 : 0.5 }}\n                  >\n                    Cancel\n                  </button>\n                  {!CAN_CANCEL && (\n                    <div style={{ fontSize: \"0.9em\", color: \"#666\", marginTop: 4 }}>\n                      Cancellation enabled in {timeLeft}s\n                    </div>\n                  )}\n                </>\n              ) : (\n                <button\n                  onClick={() => acceptMatch(m)}\n                  disabled={!!currentMatch || isAccepting}\n                  style={{ marginLeft: 10 }}\n                >\n                  {isAccepting ? \"Accepting…\" : \"Accept\"}\n                </button>\n              )}\n            </li>\n          ))}\n        </ul>\n      )}\n    </section>\n  );\n\n  const renderWaiting = () => (\n    <section className=\"waiting-section\">\n      <h2>Waiting for opponent…</h2>\n      <>\n        <button\n          onClick={() => cancelMatch(currentMatch)}\n          disabled={!CAN_CANCEL}\n          style={{ opacity: CAN_CANCEL ? 1 : 0.5 }}\n        >\n          Cancel Match\n        </button>\n        {!CAN_CANCEL && (\n          <div style={{ fontSize: \"0.9em\", color: \"#666\", marginTop: 4 }}>\n            Cancellation enabled in {timeLeft}s\n          </div>\n        )}\n      </>\n    </section>\n  );\n\n  const renderRace = () => (\n    <section className=\"race-section\">\n      {matchStatus === \"ready\" && <h2>Starting in {countdown}</h2>}\n      {matchStatus === \"racing\" && (\n        <>\n          <div className=\"sentence-display\">{sentence}</div>\n          <input\n            ref={inputRef}\n            type=\"text\"\n            value={inputValue}\n            onChange={handleInput}\n            onPaste={handleInput}\n            placeholder=\"Start typing…\"\n            disabled={isInputDisabled}\n            autoFocus\n            style={hasError ? { borderColor: \"red\" } : {}}\n          />\n          {hasError && (\n            <div style={{ color: \"red\", marginTop: 4 }}>\n              Mistake detected – please correct your typing.\n            </div>\n          )}\n          <div className=\"track\">\n            <div className=\"lane\">\n              <div\n                className=\"car car-player\"\n                style={{ left: `${playerProgress * 100}%` }}\n              >\n                🚗\n              </div>\n            </div>\n            <div className=\"lane\">\n              <div\n                className=\"car car-opponent\"\n                style={{ left: `${opponentProgress * 100}%` }}\n              >\n                🏎️\n              </div>\n            </div>\n          </div>\n        </>\n      )}\n\n      {matchStatus === \"finished\" && raceResult?.result === \"win\" && (\n        <div className=\"results results-win\">\n          <h2 style={{ fontSize: \"2rem\" }}>🏆 You Won!</h2>\n          <button\n            onClick={async () => {\n              try {\n                const ix = await buildResolveIxn(\n                  currentMatch.id,\n                  walletAddressRef.current\n                );\n                const tx = new Transaction().add(ix);\n                await wallet.sendTransaction(tx, connection);\n                resetGame();\n              } catch (e) {\n                console.error(\"Claim error:\", e);\n                alert(\"Payout error:\\n\" + e.message);\n              }\n            }}\n          >\n            Claim Winnings\n          </button>\n        </div>\n      )}\n\n      {matchStatus === \"finished\" && raceResult?.result === \"lose\" && (\n        <div className=\"results results-lose\" style={{ textAlign: \"center\" }}>\n          <h2 style={{ fontSize: \"2rem\", color: \"#c0392b\" }}>😢 You Lost!</h2>\n          <p>Better luck next time!</p>\n          <button onClick={resetGame}>Back to Matches</button>\n        </div>\n      )}\n    </section>\n  );\n\n  const renderChat = () => (\n    <section className=\"chat-section\">\n      <h2>Chat</h2>\n      <div\n        className=\"chat-messages\"\n        style={{ maxHeight: 150, overflowY: \"auto\" }}\n      >\n        {chatMessages.map((msg, i) => (\n          <p\n            key={i}\n            className={msg.sender === walletAddressRef.current ? \"self\" : \"other\"}\n          >\n            <strong>{msg.sender.slice(0, 6)}…:</strong> {msg.message}\n          </p>\n        ))}\n      </div>\n      <input\n        value={chatInput}\n        onChange={(e) => setChatInput(e.target.value)}\n        onKeyDown={(e) =>\n          e.key === \"Enter\" &&\n          socket.emit(\"message\", {\n            matchId: currentMatch.id,\n            sender: walletAddressRef.current,\n            message: chatInput,\n          }) &&\n          setChatInput(\"\")\n        }\n      />\n      <button\n        onClick={() => {\n          socket.emit(\"message\", {\n            matchId: currentMatch.id,\n            sender: walletAddressRef.current,\n            message: chatInput,\n          });\n          setChatInput(\"\");\n        }}\n        disabled={!chatInput.trim()}\n      >\n        Send\n      </button>\n    </section>\n  );\n\n  return (\n    <div className=\"app\">\n      <header>\n        <h1>Type Racer</h1>\n        {connected ? (\n          <div className=\"wallet-info\">\n            {walletAddressRef.current.slice(0, 6)}… (\n            {walletBalance.toFixed(2)} SOL)\n          </div>\n        ) : (\n          <WalletMultiButton />\n        )}\n      </header>\n\n      {!connected && <p>Please connect your wallet to play.</p>}\n      {connected && !currentMatch && renderMatchmaking()}\n      {connected && currentMatch && matchStatus === \"waiting\" && renderWaiting()}\n      {connected &&\n        currentMatch &&\n        (matchStatus === \"ready\" ||\n          matchStatus === \"racing\" ||\n          matchStatus === \"finished\") &&\n        renderRace()}\n      {connected && currentMatch && matchStatus === \"finished\" && renderChat()}\n    </div>\n  );\n}\n"],"mappings":";;AAAA;;AAEA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAC1D,OAAO,WAAW;AAClB,OAAOC,SAAS,MAAM,aAAa;AACnC,SAASC,aAAa,EAAEC,SAAS,QAAQ,8BAA8B;AACvE,SAASC,iBAAiB,QAAQ,iCAAiC;AACnE,SACEC,gBAAgB,EAChBC,SAAS,EACTC,WAAW,QACN,iBAAiB;AACxB,OAAOC,MAAM,MAAM,UAAU;AAC7B,OAAO,KAAKC,MAAM,MAAM,mBAAmB;AAC3C,OAAOC,GAAG,MAAM,6BAA6B;AAC7C,SAASC,WAAW,QAAQ,UAAU;AACtC,SACEC,6BAA6B,EAC7BC,sBAAsB,EACtBC,cAAc,EACdC,eAAe,QACV,UAAU;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAElB,eAAe,SAASC,GAAGA,CAAA,EAAG;EAAAC,EAAA;EAC5B,MAAM;IAAEC;EAAW,CAAC,GAAGpB,aAAa,CAAC,CAAC;EACtC,MAAMqB,MAAM,GAAGpB,SAAS,CAAC,CAAC;EAC1B,MAAM;IAAEqB,SAAS;IAAEC;EAAU,CAAC,GAAGF,MAAM;EACvC,MAAMG,aAAa,GAAG,CAAAF,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEG,QAAQ,CAAC,CAAC,KAAI,EAAE;;EAEjD;EACA,MAAMC,gBAAgB,GAAG5B,MAAM,CAAC0B,aAAa,CAAC;EAC9C3B,SAAS,CAAC,MAAM;IACd6B,gBAAgB,CAACC,OAAO,GAAGH,aAAa;EAC1C,CAAC,EAAE,CAACA,aAAa,CAAC,CAAC;;EAEnB;EACA3B,SAAS,CAAC,MAAM;IACd,IAAI0B,SAAS,IAAIH,UAAU,EAAE;MAC3B,MAAMQ,IAAI,GAAG,IAAIrB,MAAM,CAACsB,cAAc,CAACT,UAAU,EAAEC,MAAM,EAAE;QACzDS,mBAAmB,EAAE,WAAW;QAChCC,UAAU,EAAE;MACd,CAAC,CAAC;MACFxB,MAAM,CAACE,WAAW,CAACmB,IAAI,CAAC;MACxBnB,WAAW,CAACY,MAAM,CAAC;IACrB;EACF,CAAC,EAAE,CAACE,SAAS,EAAEH,UAAU,EAAEC,MAAM,CAAC,CAAC;;EAEnC;EACA,MAAM,CAACW,aAAa,EAAEC,gBAAgB,CAAC,GAAGrC,QAAQ,CAAC,CAAC,CAAC;EACrDC,SAAS,CAAC,MAAM;IACd,IAAIuB,UAAU,IAAIE,SAAS,EAAE;MAC3BF,UAAU,CAACc,UAAU,CAACZ,SAAS,CAAC,CAACa,IAAI,CAAEC,QAAQ,IAAK;QAClDH,gBAAgB,CAACG,QAAQ,GAAGjC,gBAAgB,CAAC;MAC/C,CAAC,CAAC;IACJ;EACF,CAAC,EAAE,CAACiB,UAAU,EAAEE,SAAS,CAAC,CAAC;;EAE3B;EACA,MAAM,CAACe,KAAK,EAAEC,QAAQ,CAAC,GAAG1C,QAAQ,CAAC,CAAC,CAAC;EACrC,MAAM,CAAC2C,WAAW,EAAEC,cAAc,CAAC,GAAG5C,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAAC6C,YAAY,EAAEC,eAAe,CAAC,GAAG9C,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAAC+C,WAAW,EAAEC,cAAc,CAAC,GAAGhD,QAAQ,CAAC,SAAS,CAAC;;EAEzD;EACA,MAAM,CAACiD,cAAc,EAAEC,iBAAiB,CAAC,GAAGlD,QAAQ,CAAC,CAAC,CAAC;EACvD,MAAM,CAACmD,QAAQ,EAAEC,WAAW,CAAC,GAAGpD,QAAQ,CAAC,CAAC,CAAC;EAC3CC,SAAS,CAAC,MAAM;IACd,IAAI,CAACgD,cAAc,EAAE;IACrB,MAAMI,IAAI,GAAGA,CAAA,KAAM;MACjB,MAAMC,OAAO,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGP,cAAc;MAC3C,MAAMQ,IAAI,GAAGC,IAAI,CAACC,IAAI,CAAC,CAAC,KAAM,GAAGL,OAAO,IAAI,IAAI,CAAC;MACjDF,WAAW,CAACK,IAAI,GAAG,CAAC,GAAGA,IAAI,GAAG,CAAC,CAAC;IAClC,CAAC;IACDJ,IAAI,CAAC,CAAC;IACN,MAAMO,EAAE,GAAGC,WAAW,CAACR,IAAI,EAAE,IAAI,CAAC;IAClC,OAAO,MAAMS,aAAa,CAACF,EAAE,CAAC;EAChC,CAAC,EAAE,CAACX,cAAc,CAAC,CAAC;;EAEpB;EACA,MAAM,CAACc,QAAQ,EAAEC,WAAW,CAAC,GAAGhE,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACiE,UAAU,EAAEC,aAAa,CAAC,GAAGlE,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACmE,cAAc,EAAEC,iBAAiB,CAAC,GAAGpE,QAAQ,CAAC,CAAC,CAAC;EACvD,MAAM,CAACqE,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGtE,QAAQ,CAAC,CAAC,CAAC;EAC3D,MAAM,CAACuE,SAAS,EAAEC,YAAY,CAAC,GAAGxE,QAAQ,CAAC,CAAC,CAAC;EAC7C,MAAM,CAACyE,UAAU,EAAEC,aAAa,CAAC,GAAG1E,QAAQ,CAAC,IAAI,CAAC;EAClD,MAAM,CAAC2E,eAAe,EAAEC,kBAAkB,CAAC,GAAG5E,QAAQ,CAAC,KAAK,CAAC;EAC7D,MAAM,CAAC6E,WAAW,EAAEC,cAAc,CAAC,GAAG9E,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAAC+E,cAAc,EAAEC,iBAAiB,CAAC,GAAGhF,QAAQ,CAAC,IAAI,CAAC;;EAE1D;EACA,MAAM,CAACiF,QAAQ,EAAEC,WAAW,CAAC,GAAGlF,QAAQ,CAAC,KAAK,CAAC;;EAE/C;EACA,MAAM,CAACmF,YAAY,EAAEC,eAAe,CAAC,GAAGpF,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACqF,SAAS,EAAEC,YAAY,CAAC,GAAGtF,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAMuF,QAAQ,GAAGrF,MAAM,CAAC,IAAI,CAAC;EAE7B,MAAMsF,GAAG,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB;EACzC,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAG7F,QAAQ,CAACuD,IAAI,CAACC,GAAG,CAAC,CAAC,CAAC;EAC5D,MAAM,CAACsC,QAAQ,EAAEC,WAAW,CAAC,GAAG/F,QAAQ,CAAC,CAAC,CAAC;EAC3C,MAAMgG,OAAO,GAAG,EAAE;;EAElB;EACA,MAAMC,cAAc,GAAIC,EAAE,IACxB/F,SAAS,CACPgG,KAAK,CAACC,IAAI,CAACF,EAAE,CAAC,CAACG,MAAM,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,GAAGC,CAAC,CAACC,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GACrDrG,SAAS,CAACsG,MAAM,CACnB;;EAEH;EACA,MAAMC,gBAAgB,GAAG,MAAAA,CAAA,KAAY;IACnC,IAAI;MACF,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGpB,GAAG,SAAS,CAAC;MACxC,MAAMqB,EAAE,GAAG,MAAMF,GAAG,CAACG,IAAI,CAAC,CAAC;MAC3BlE,cAAc,CAACiE,EAAE,CAACE,MAAM,CAAEC,CAAC,IAAK,CAACA,CAAC,CAACC,QAAQ,CAAC,CAAC;IAC/C,CAAC,CAAC,MAAM,CAAC;EACX,CAAC;;EAED;EACA,MAAMC,SAAS,GAAGA,CAAA,KAAM;IACtBpE,eAAe,CAAC,IAAI,CAAC;IACrBE,cAAc,CAAC,SAAS,CAAC;IACzBgB,WAAW,CAAC,EAAE,CAAC;IACfE,aAAa,CAAC,EAAE,CAAC;IACjBE,iBAAiB,CAAC,CAAC,CAAC;IACpBE,mBAAmB,CAAC,CAAC,CAAC;IACtBE,YAAY,CAAC,CAAC,CAAC;IACfE,aAAa,CAAC,IAAI,CAAC;IACnBE,kBAAkB,CAAC,KAAK,CAAC;IACzBI,iBAAiB,CAAC,IAAI,CAAC;IACvBe,WAAW,CAAC,CAAC,CAAC;IACdF,eAAe,CAACtC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAC;IAC3BN,iBAAiB,CAAC,CAAC,CAAC;IACpBE,WAAW,CAAC,CAAC,CAAC;IACd8B,WAAW,CAAC,KAAK,CAAC;IAClBwB,gBAAgB,CAAC,CAAC;EACpB,CAAC;;EAED;EACAzG,SAAS,CAAC,MAAM;IACdS,MAAM,CAACyG,OAAO,CAAC,CAAC;IAEhBzG,MAAM,CAAC0G,EAAE,CAAC,aAAa,EAAGP,EAAE,IAC1BjE,cAAc,CAACiE,EAAE,CAACE,MAAM,CAAEC,CAAC,IAAK,CAACA,CAAC,CAACC,QAAQ,CAAC,CAC9C,CAAC;IACDvG,MAAM,CAAC0G,EAAE,CAAC,UAAU,EAAGJ,CAAC,IACtBpE,cAAc,CAAEyE,EAAE,IAAK,CAAC,GAAGA,EAAE,EAAEL,CAAC,CAAC,CAACD,MAAM,CAAEO,CAAC,IAAK,CAACA,CAAC,CAACL,QAAQ,CAAC,CAC9D,CAAC;IACDvG,MAAM,CAAC0G,EAAE,CAAC,aAAa,EAAGlB,EAAE,IAC1BtD,cAAc,CAAEyE,EAAE,IAAKA,EAAE,CAACN,MAAM,CAAEC,CAAC,IAAKA,CAAC,CAACd,EAAE,KAAKA,EAAE,CAAC,CACtD,CAAC;IAEDxF,MAAM,CAAC0G,EAAE,CAAC,YAAY,EAAE,CAAC;MAAElB,EAAE;MAAEqB;IAAQ,CAAC,KAAK;MAC3CnD,iBAAiB,CAAC,CAAC,CAAC;MACpBE,mBAAmB,CAAC,CAAC,CAAC;MACtBxB,eAAe,CAAC;QACdoD,EAAE;QACFsB,MAAM,EAAE,CAAA3E,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAE2E,MAAM,KAAI,CAAC;QACjCC,OAAO,EAAEF,OAAO,CAAC,CAAC,CAAC;QACnBN,QAAQ,EAAEM,OAAO,CAAC,CAAC,CAAC;QACpBG,KAAK,EAAE7E,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAE6E;MACvB,CAAC,CAAC;MACF1E,cAAc,CAAC,OAAO,CAAC;MACvBgB,WAAW,CAACiC,cAAc,CAACC,EAAE,CAAC,CAAC;MAC/B1B,YAAY,CAAC,CAAC,CAAC;MACfQ,iBAAiB,CAACuC,OAAO,CAACI,IAAI,CAAEC,CAAC,IAAKA,CAAC,KAAK9F,gBAAgB,CAACC,OAAO,CAAC,CAAC;MACtEmD,WAAW,CAAC,KAAK,CAAC;IACpB,CAAC,CAAC;IAEFxE,MAAM,CAAC0G,EAAE,CAAC,kBAAkB,EAAE,CAAC;MAAE3F,MAAM,EAAEmG,CAAC;MAAEC;IAAS,CAAC,KAAK;MACzD,IAAID,CAAC,KAAK9F,gBAAgB,CAACC,OAAO,EAAEuC,mBAAmB,CAACuD,QAAQ,CAAC;IACnE,CAAC,CAAC;IAEFnH,MAAM,CAAC0G,EAAE,CAAC,SAAS,EAAE,CAAC;MAAEU,MAAM;MAAEC;IAAY,CAAC,KAAK;MAChD/E,cAAc,CAAC,UAAU,CAAC;MAC1B4B,kBAAkB,CAAC,IAAI,CAAC;MACxBF,aAAa,CAAC;QACZsD,MAAM,EAAEF,MAAM,KAAKhG,gBAAgB,CAACC,OAAO,GAAG,KAAK,GAAG;MACxD,CAAC,CAAC;MACF,IAAIgG,WAAW,EAAE;QAAA,IAAAE,qBAAA,EAAAC,qBAAA;QACf9D,iBAAiB,EAAA6D,qBAAA,GAACF,WAAW,CAACjG,gBAAgB,CAACC,OAAO,CAAC,cAAAkG,qBAAA,cAAAA,qBAAA,GAAI,CAAC,CAAC;QAC7D3D,mBAAmB,EAAA4D,qBAAA,GAACH,WAAW,CAAChD,cAAc,CAAC,cAAAmD,qBAAA,cAAAA,qBAAA,GAAI,CAAC,CAAC;MACvD;IACF,CAAC,CAAC;IAEFxH,MAAM,CAAC0G,EAAE,CAAC,MAAM,EAAEhC,eAAe,CAAC;IAClC1E,MAAM,CAAC0G,EAAE,CAAC,cAAc,EAAEF,SAAS,CAAC;IAEpCR,gBAAgB,CAAC,CAAC;IAClB,OAAO,MAAM;MACXhG,MAAM,CAACyH,kBAAkB,CAAC,CAAC;MAC3BzH,MAAM,CAAC0H,UAAU,CAAC,CAAC;IACrB,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;;EAEN;EACAnI,SAAS,CAAC,MAAM;IACd,IAAI8C,WAAW,KAAK,OAAO,IAAIwB,SAAS,GAAG,CAAC,EAAE;MAC5C,MAAM8D,CAAC,GAAGC,UAAU,CAAC,MAAM9D,YAAY,CAAE+B,CAAC,IAAKA,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC;MAC5D,OAAO,MAAMgC,YAAY,CAACF,CAAC,CAAC;IAC9B,CAAC,MAAM,IAAItF,WAAW,KAAK,OAAO,IAAIwB,SAAS,KAAK,CAAC,EAAE;MAAA,IAAAiE,iBAAA;MACrDxF,cAAc,CAAC,QAAQ,CAAC;MACxB4B,kBAAkB,CAAC,KAAK,CAAC;MACzB,CAAA4D,iBAAA,GAAAjD,QAAQ,CAACxD,OAAO,cAAAyG,iBAAA,uBAAhBA,iBAAA,CAAkBC,KAAK,CAAC,CAAC;IAC3B;EACF,CAAC,EAAE,CAAClE,SAAS,EAAExB,WAAW,CAAC,CAAC;;EAE5B;EACA,MAAM2F,UAAU,GAAGvF,QAAQ,KAAK,CAAC,IAAIJ,WAAW,KAAK,SAAS;;EAE9D;EACA,eAAe4F,WAAWA,CAAA,EAAG;IAC3B,IAAI,CAAChH,SAAS,EAAE,OAAOiH,KAAK,CAAC,gBAAgB,CAAC;IAC9C,IAAI;MACF,MAAMpG,QAAQ,GAAGkB,IAAI,CAACmF,KAAK,CAACpG,KAAK,GAAGlC,gBAAgB,CAAC;MACrD,MAAMmH,KAAK,GAAGhE,IAAI,CAACmF,KAAK,CAACnF,IAAI,CAACoF,MAAM,CAAC,CAAC,GAAG,OAAS,CAAC;MACnD,MAAM;QAAEC,MAAM;QAAEC,SAAS;QAAEC;MAAU,CAAC,GACpC,MAAMnI,6BAA6B,CAAC0B,QAAQ,EAAEd,SAAS,EAAEgG,KAAK,CAAC;MAEjE,MAAMwB,EAAE,GAAG,IAAIzI,WAAW,CAAC,CAAC,CAAC0I,GAAG,CAACJ,MAAM,EAAEC,SAAS,CAAC;MACnD,MAAMvH,MAAM,CAAC2H,eAAe,CAACF,EAAE,EAAE1H,UAAU,CAAC;MAE5C,MAAM0E,EAAE,GAAG+C,SAAS,CAACpH,QAAQ,CAAC,CAAC;MAC/B,MAAM+E,KAAK,CAAC,GAAGpB,GAAG,SAAS,EAAE;QAC3B6D,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UACnBvD,EAAE;UACFwD,KAAK,EAAExD,EAAE;UACTsB,MAAM,EAAEmC,MAAM,CAAClH,KAAK,CAAC;UACrBgF,OAAO,EAAE3F,gBAAgB,CAACC,OAAO;UACjC6H,UAAU,EAAE,CAAC;UACblC;QACF,CAAC;MACH,CAAC,CAAC;MAEF5E,eAAe,CAAC;QACdoD,EAAE;QACFsB,MAAM,EAAEmC,MAAM,CAAClH,KAAK,CAAC;QACrBgF,OAAO,EAAE3F,gBAAgB,CAACC,OAAO;QACjC2F;MACF,CAAC,CAAC;MACFxE,iBAAiB,CAACK,IAAI,CAACC,GAAG,CAAC,CAAC,CAAC;MAC7BR,cAAc,CAAC,SAAS,CAAC;MACzBtC,MAAM,CAACmJ,IAAI,CAAC,WAAW,EAAE3D,EAAE,CAAC;MAC5BQ,gBAAgB,CAAC,CAAC;IACpB,CAAC,CAAC,OAAOoD,CAAC,EAAE;MACVC,OAAO,CAACC,KAAK,CAAC,eAAe,EAAEF,CAAC,CAAC;MACjClB,KAAK,CAAC,wBAAwB,GAAGkB,CAAC,CAACG,OAAO,CAAC;IAC7C;EACF;;EAEA;EACA,eAAeC,WAAWA,CAAClD,CAAC,EAAE;IAC5B,IAAI,CAACrF,SAAS,EAAE,OAAOiH,KAAK,CAAC,gBAAgB,CAAC;IAC9C9D,cAAc,CAAC,IAAI,CAAC;IACpB,IAAI;MACF,MAAMqF,EAAE,GAAG,MAAMpJ,sBAAsB,CAACiG,CAAC,CAACd,EAAE,CAAC;MAC7C,MAAMzE,MAAM,CAAC2H,eAAe,CAAC,IAAI3I,WAAW,CAAC,CAAC,CAAC0I,GAAG,CAACgB,EAAE,CAAC,EAAE3I,UAAU,CAAC;MAEnEwB,cAAc,CAAC,OAAO,CAAC;MACvBgB,WAAW,CAACiC,cAAc,CAACe,CAAC,CAACd,EAAE,CAAC,CAAC;MACjC1B,YAAY,CAAC,CAAC,CAAC;MAEf,MAAMoC,KAAK,CAAC,GAAGpB,GAAG,WAAWwB,CAAC,CAACd,EAAE,SAAS,EAAE;QAC1CmD,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAExC,QAAQ,EAAEnF,gBAAgB,CAACC;QAAQ,CAAC;MAC7D,CAAC,CAAC;MACFe,eAAe,CAAC;QAAE,GAAGkE,CAAC;QAAEC,QAAQ,EAAEnF,gBAAgB,CAACC;MAAQ,CAAC,CAAC;MAC7DrB,MAAM,CAACmJ,IAAI,CAAC,WAAW,EAAE7C,CAAC,CAACd,EAAE,CAAC;MAC9BhB,WAAW,CAAC,KAAK,CAAC;IACpB,CAAC,CAAC,OAAO4E,CAAC,EAAE;MACVC,OAAO,CAACC,KAAK,CAAC,eAAe,EAAEF,CAAC,CAAC;MACjClB,KAAK,CAAC,iBAAiB,GAAGkB,CAAC,CAACG,OAAO,CAAC;MACpCnH,eAAe,CAAC,IAAI,CAAC;IACvB,CAAC,SAAS;MACRgC,cAAc,CAAC,KAAK,CAAC;IACvB;EACF;;EAEA;EACA,eAAesF,WAAWA,CAACpD,CAAC,EAAE;IAC5B,IAAI,CAAC0B,UAAU,EAAE;IACjB,IAAI;MACF,MAAMyB,EAAE,GAAG,MAAMnJ,cAAc,CAC7BgG,CAAC,CAACd,EAAE,EACJc,CAAC,CAACS,OAAO,EACTT,CAAC,CAACC,QAAQ,IAAID,CAAC,CAACS,OAClB,CAAC;MACD,MAAMhG,MAAM,CAAC2H,eAAe,CAAC,IAAI3I,WAAW,CAAC,CAAC,CAAC0I,GAAG,CAACgB,EAAE,CAAC,EAAE3I,UAAU,CAAC;MACnE,MAAMoF,KAAK,CAAC,GAAGpB,GAAG,WAAWwB,CAAC,CAACd,EAAE,SAAS,EAAE;QAAEmD,MAAM,EAAE;MAAO,CAAC,CAAC;MAC/DnC,SAAS,CAAC,CAAC;IACb,CAAC,CAAC,OAAO4C,CAAC,EAAE;MACVC,OAAO,CAACC,KAAK,CAAC,eAAe,EAAEF,CAAC,CAAC;MACjClB,KAAK,CAAC,iBAAiB,GAAGkB,CAAC,CAACG,OAAO,CAAC;IACtC;EACF;;EAEA;EACA,SAASI,WAAWA,CAACP,CAAC,EAAE;IACtB,IAAInF,eAAe,EAAE;IACrB,IAAImF,CAAC,CAACQ,IAAI,KAAK,OAAO,EAAE;MACtBR,CAAC,CAACS,cAAc,CAAC,CAAC;MAClB;IACF;IACA,MAAMC,GAAG,GAAGV,CAAC,CAACW,MAAM,CAACC,KAAK;IAC1B;IACA,IAAI,CAAC3G,QAAQ,CAAC4G,UAAU,CAACH,GAAG,CAAC,EAAE;MAC7BtF,WAAW,CAAC,IAAI,CAAC;MACjB,OAAO,CAAC;IACV;IACA;IACAA,WAAW,CAAC,KAAK,CAAC;IAElB,MAAM1B,GAAG,GAAGD,IAAI,CAACC,GAAG,CAAC,CAAC;IACtB,MAAMoH,GAAG,GAAGlH,IAAI,CAACmH,GAAG,CAAC,CAAC,EAAEL,GAAG,CAAC/D,MAAM,GAAG1C,QAAQ,CAAC0C,MAAM,CAAC;IACrD,MAAMqE,KAAK,GAAGF,GAAG,GAAG9E,QAAQ;IAC5B,MAAMiF,EAAE,GAAG,CAACvH,GAAG,GAAGoC,YAAY,IAAI,IAAI;IACtC,MAAMoF,GAAG,GAAGD,EAAE,GAAG,CAAC,GAAID,KAAK,GAAG/G,QAAQ,CAAC0C,MAAM,GAAIsE,EAAE,GAAG,CAAC;IACvD,IAAIC,GAAG,GAAGhF,OAAO,EAAE;IAEnBD,WAAW,CAAC6E,GAAG,CAAC;IAChB/E,eAAe,CAACrC,GAAG,CAAC;IACpBU,aAAa,CAACsG,GAAG,CAAC;IAClBpG,iBAAiB,CAACwG,GAAG,CAAC;IACtBlK,MAAM,CAACmJ,IAAI,CAAC,UAAU,EAAE;MACtBoB,OAAO,EAAEpI,YAAY,CAACqD,EAAE;MACxBzE,MAAM,EAAEK,gBAAgB,CAACC,OAAO;MAChC8F,QAAQ,EAAE+C;IACZ,CAAC,CAAC;IAEF,IAAIJ,GAAG,KAAKzG,QAAQ,EAAE;MACpB6C,KAAK,CAAC,GAAGpB,GAAG,WAAW3C,YAAY,CAACqD,EAAE,WAAW,EAAE;QACjDmD,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAE3B,MAAM,EAAEhG,gBAAgB,CAACC;QAAQ,CAAC;MAC3D,CAAC,CAAC;MACFiB,cAAc,CAAC,UAAU,CAAC;MAC1B4B,kBAAkB,CAAC,IAAI,CAAC;MACxBF,aAAa,CAAC;QAAEsD,MAAM,EAAE;MAAM,CAAC,CAAC;IAClC;EACF;;EAEA;;EAEA,MAAMkD,iBAAiB,GAAGA,CAAA,kBACxB/J,OAAA;IAASgK,SAAS,EAAC,aAAa;IAAAC,QAAA,gBAC9BjK,OAAA;MAAAiK,QAAA,EAAI;IAAc;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACvBrK,OAAA;MAAAiK,QAAA,GAAO,cAEL,eAAAjK,OAAA;QACEmJ,IAAI,EAAC,QAAQ;QACbO,GAAG,EAAC,MAAM;QACVY,IAAI,EAAC,MAAM;QACXf,KAAK,EAAEjI,KAAM;QACbiJ,QAAQ,EAAG5B,CAAC,IAAKpH,QAAQ,CAACiH,MAAM,CAACG,CAAC,CAACW,MAAM,CAACC,KAAK,CAAC;MAAE;QAAAW,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnD,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACG,CAAC,eACRrK,OAAA;MAAQwK,OAAO,EAAEhD,WAAY;MAACiD,QAAQ,EAAE,CAACnJ,KAAK,IAAIA,KAAK,IAAI,CAAE;MAAA2I,QAAA,EAAC;IAE9D;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,eAETrK,OAAA;MAAI0K,KAAK,EAAE;QAAEC,SAAS,EAAE;MAAG,CAAE;MAAAV,QAAA,EAAC;IAAY;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,EAC9C7I,WAAW,CAAC8D,MAAM,KAAK,CAAC,gBACvBtF,OAAA;MAAAiK,QAAA,EAAG;IAA4B;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,gBAEnCrK,OAAA;MAAAiK,QAAA,EACGzI,WAAW,CAACoJ,GAAG,CAAE/E,CAAC,iBACjB7F,OAAA;QAAAiK,QAAA,GACGpE,CAAC,CAACd,EAAE,CAAC8F,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAC,WAAI,EAAChF,CAAC,CAACQ,MAAM,EAAC,MAAI,EAAC,GAAG,EACvCR,CAAC,CAACS,OAAO,KAAK3F,gBAAgB,CAACC,OAAO,gBACrCZ,OAAA,CAAAE,SAAA;UAAA+J,QAAA,gBACEjK,OAAA;YACEwK,OAAO,EAAEA,CAAA,KAAMvB,WAAW,CAACpD,CAAC,CAAE;YAC9B4E,QAAQ,EAAE,CAAClD,UAAW;YACtBmD,KAAK,EAAE;cAAEI,UAAU,EAAE,EAAE;cAAEC,OAAO,EAAExD,UAAU,GAAG,CAAC,GAAG;YAAI,CAAE;YAAA0C,QAAA,EAC1D;UAED;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,EACR,CAAC9C,UAAU,iBACVvH,OAAA;YAAK0K,KAAK,EAAE;cAAEM,QAAQ,EAAE,OAAO;cAAEC,KAAK,EAAE,MAAM;cAAEN,SAAS,EAAE;YAAE,CAAE;YAAAV,QAAA,GAAC,0BACtC,EAACjI,QAAQ,EAAC,GACpC;UAAA;YAAAkI,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CACN;QAAA,eACD,CAAC,gBAEHrK,OAAA;UACEwK,OAAO,EAAEA,CAAA,KAAMzB,WAAW,CAAClD,CAAC,CAAE;UAC9B4E,QAAQ,EAAE,CAAC,CAAC/I,YAAY,IAAIgC,WAAY;UACxCgH,KAAK,EAAE;YAAEI,UAAU,EAAE;UAAG,CAAE;UAAAb,QAAA,EAEzBvG,WAAW,GAAG,YAAY,GAAG;QAAQ;UAAAwG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChC,CACT;MAAA,GAzBMxE,CAAC,CAACd,EAAE;QAAAmF,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OA0BT,CACL;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CACL;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACM,CACV;EAED,MAAMa,aAAa,GAAGA,CAAA,kBACpBlL,OAAA;IAASgK,SAAS,EAAC,iBAAiB;IAAAC,QAAA,gBAClCjK,OAAA;MAAAiK,QAAA,EAAI;IAAqB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAC9BrK,OAAA,CAAAE,SAAA;MAAA+J,QAAA,gBACEjK,OAAA;QACEwK,OAAO,EAAEA,CAAA,KAAMvB,WAAW,CAACvH,YAAY,CAAE;QACzC+I,QAAQ,EAAE,CAAClD,UAAW;QACtBmD,KAAK,EAAE;UAAEK,OAAO,EAAExD,UAAU,GAAG,CAAC,GAAG;QAAI,CAAE;QAAA0C,QAAA,EAC1C;MAED;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,EACR,CAAC9C,UAAU,iBACVvH,OAAA;QAAK0K,KAAK,EAAE;UAAEM,QAAQ,EAAE,OAAO;UAAEC,KAAK,EAAE,MAAM;UAAEN,SAAS,EAAE;QAAE,CAAE;QAAAV,QAAA,GAAC,0BACtC,EAACjI,QAAQ,EAAC,GACpC;MAAA;QAAAkI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CACN;IAAA,eACD,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACI,CACV;EAED,MAAMc,UAAU,GAAGA,CAAA,kBACjBnL,OAAA;IAASgK,SAAS,EAAC,cAAc;IAAAC,QAAA,GAC9BrI,WAAW,KAAK,OAAO,iBAAI5B,OAAA;MAAAiK,QAAA,GAAI,cAAY,EAAC7G,SAAS;IAAA;MAAA8G,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,EAC3DzI,WAAW,KAAK,QAAQ,iBACvB5B,OAAA,CAAAE,SAAA;MAAA+J,QAAA,gBACEjK,OAAA;QAAKgK,SAAS,EAAC,kBAAkB;QAAAC,QAAA,EAAErH;MAAQ;QAAAsH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eAClDrK,OAAA;QACEoL,GAAG,EAAEhH,QAAS;QACd+E,IAAI,EAAC,MAAM;QACXI,KAAK,EAAEzG,UAAW;QAClByH,QAAQ,EAAErB,WAAY;QACtBmC,OAAO,EAAEnC,WAAY;QACrBoC,WAAW,EAAC,oBAAe;QAC3Bb,QAAQ,EAAEjH,eAAgB;QAC1B+H,SAAS;QACTb,KAAK,EAAE5G,QAAQ,GAAG;UAAE0H,WAAW,EAAE;QAAM,CAAC,GAAG,CAAC;MAAE;QAAAtB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC/C,CAAC,EACDvG,QAAQ,iBACP9D,OAAA;QAAK0K,KAAK,EAAE;UAAEO,KAAK,EAAE,KAAK;UAAEN,SAAS,EAAE;QAAE,CAAE;QAAAV,QAAA,EAAC;MAE5C;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CACN,eACDrK,OAAA;QAAKgK,SAAS,EAAC,OAAO;QAAAC,QAAA,gBACpBjK,OAAA;UAAKgK,SAAS,EAAC,MAAM;UAAAC,QAAA,eACnBjK,OAAA;YACEgK,SAAS,EAAC,gBAAgB;YAC1BU,KAAK,EAAE;cAAEe,IAAI,EAAE,GAAGzI,cAAc,GAAG,GAAG;YAAI,CAAE;YAAAiH,QAAA,EAC7C;UAED;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eACNrK,OAAA;UAAKgK,SAAS,EAAC,MAAM;UAAAC,QAAA,eACnBjK,OAAA;YACEgK,SAAS,EAAC,kBAAkB;YAC5BU,KAAK,EAAE;cAAEe,IAAI,EAAE,GAAGvI,gBAAgB,GAAG,GAAG;YAAI,CAAE;YAAA+G,QAAA,EAC/C;UAED;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA,eACN,CACH,EAEAzI,WAAW,KAAK,UAAU,IAAI,CAAA0B,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAEuD,MAAM,MAAK,KAAK,iBACzD7G,OAAA;MAAKgK,SAAS,EAAC,qBAAqB;MAAAC,QAAA,gBAClCjK,OAAA;QAAI0K,KAAK,EAAE;UAAEM,QAAQ,EAAE;QAAO,CAAE;QAAAf,QAAA,EAAC;MAAW;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACjDrK,OAAA;QACEwK,OAAO,EAAE,MAAAA,CAAA,KAAY;UACnB,IAAI;YACF,MAAMxB,EAAE,GAAG,MAAMlJ,eAAe,CAC9B4B,YAAY,CAACqD,EAAE,EACfpE,gBAAgB,CAACC,OACnB,CAAC;YACD,MAAMmH,EAAE,GAAG,IAAIzI,WAAW,CAAC,CAAC,CAAC0I,GAAG,CAACgB,EAAE,CAAC;YACpC,MAAM1I,MAAM,CAAC2H,eAAe,CAACF,EAAE,EAAE1H,UAAU,CAAC;YAC5C0F,SAAS,CAAC,CAAC;UACb,CAAC,CAAC,OAAO4C,CAAC,EAAE;YACVC,OAAO,CAACC,KAAK,CAAC,cAAc,EAAEF,CAAC,CAAC;YAChClB,KAAK,CAAC,iBAAiB,GAAGkB,CAAC,CAACG,OAAO,CAAC;UACtC;QACF,CAAE;QAAAmB,QAAA,EACH;MAED;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CACN,EAEAzI,WAAW,KAAK,UAAU,IAAI,CAAA0B,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAEuD,MAAM,MAAK,MAAM,iBAC1D7G,OAAA;MAAKgK,SAAS,EAAC,sBAAsB;MAACU,KAAK,EAAE;QAAEgB,SAAS,EAAE;MAAS,CAAE;MAAAzB,QAAA,gBACnEjK,OAAA;QAAI0K,KAAK,EAAE;UAAEM,QAAQ,EAAE,MAAM;UAAEC,KAAK,EAAE;QAAU,CAAE;QAAAhB,QAAA,EAAC;MAAY;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACpErK,OAAA;QAAAiK,QAAA,EAAG;MAAsB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eAC7BrK,OAAA;QAAQwK,OAAO,EAAEzE,SAAU;QAAAkE,QAAA,EAAC;MAAe;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACjD,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACM,CACV;EAED,MAAMsB,UAAU,GAAGA,CAAA,kBACjB3L,OAAA;IAASgK,SAAS,EAAC,cAAc;IAAAC,QAAA,gBAC/BjK,OAAA;MAAAiK,QAAA,EAAI;IAAI;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACbrK,OAAA;MACEgK,SAAS,EAAC,eAAe;MACzBU,KAAK,EAAE;QAAEkB,SAAS,EAAE,GAAG;QAAEC,SAAS,EAAE;MAAO,CAAE;MAAA5B,QAAA,EAE5CjG,YAAY,CAAC4G,GAAG,CAAC,CAACkB,GAAG,EAAEC,CAAC,kBACvB/L,OAAA;QAEEgK,SAAS,EAAE8B,GAAG,CAACE,MAAM,KAAKrL,gBAAgB,CAACC,OAAO,GAAG,MAAM,GAAG,OAAQ;QAAAqJ,QAAA,gBAEtEjK,OAAA;UAAAiK,QAAA,GAAS6B,GAAG,CAACE,MAAM,CAACnB,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAC,SAAE;QAAA;UAAAX,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,KAAC,EAACyB,GAAG,CAAChD,OAAO;MAAA,GAHnDiD,CAAC;QAAA7B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAIL,CACJ;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,eACNrK,OAAA;MACEuJ,KAAK,EAAErF,SAAU;MACjBqG,QAAQ,EAAG5B,CAAC,IAAKxE,YAAY,CAACwE,CAAC,CAACW,MAAM,CAACC,KAAK,CAAE;MAC9C0C,SAAS,EAAGtD,CAAC,IACXA,CAAC,CAACuD,GAAG,KAAK,OAAO,IACjB3M,MAAM,CAACmJ,IAAI,CAAC,SAAS,EAAE;QACrBoB,OAAO,EAAEpI,YAAY,CAACqD,EAAE;QACxBiH,MAAM,EAAErL,gBAAgB,CAACC,OAAO;QAChCkI,OAAO,EAAE5E;MACX,CAAC,CAAC,IACFC,YAAY,CAAC,EAAE;IAChB;MAAA+F,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACF,CAAC,eACFrK,OAAA;MACEwK,OAAO,EAAEA,CAAA,KAAM;QACbjL,MAAM,CAACmJ,IAAI,CAAC,SAAS,EAAE;UACrBoB,OAAO,EAAEpI,YAAY,CAACqD,EAAE;UACxBiH,MAAM,EAAErL,gBAAgB,CAACC,OAAO;UAChCkI,OAAO,EAAE5E;QACX,CAAC,CAAC;QACFC,YAAY,CAAC,EAAE,CAAC;MAClB,CAAE;MACFsG,QAAQ,EAAE,CAACvG,SAAS,CAACiI,IAAI,CAAC,CAAE;MAAAlC,QAAA,EAC7B;IAED;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACF,CACV;EAED,oBACErK,OAAA;IAAKgK,SAAS,EAAC,KAAK;IAAAC,QAAA,gBAClBjK,OAAA;MAAAiK,QAAA,gBACEjK,OAAA;QAAAiK,QAAA,EAAI;MAAU;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,EAClB7J,SAAS,gBACRR,OAAA;QAAKgK,SAAS,EAAC,aAAa;QAAAC,QAAA,GACzBtJ,gBAAgB,CAACC,OAAO,CAACiK,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAC,UACtC,EAAC5J,aAAa,CAACmL,OAAO,CAAC,CAAC,CAAC,EAAC,OAC5B;MAAA;QAAAlC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,gBAENrK,OAAA,CAACb,iBAAiB;QAAA+K,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CACrB;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACK,CAAC,EAER,CAAC7J,SAAS,iBAAIR,OAAA;MAAAiK,QAAA,EAAG;IAAmC;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,EACxD7J,SAAS,IAAI,CAACkB,YAAY,IAAIqI,iBAAiB,CAAC,CAAC,EACjDvJ,SAAS,IAAIkB,YAAY,IAAIE,WAAW,KAAK,SAAS,IAAIsJ,aAAa,CAAC,CAAC,EACzE1K,SAAS,IACRkB,YAAY,KACXE,WAAW,KAAK,OAAO,IACtBA,WAAW,KAAK,QAAQ,IACxBA,WAAW,KAAK,UAAU,CAAC,IAC7BuJ,UAAU,CAAC,CAAC,EACb3K,SAAS,IAAIkB,YAAY,IAAIE,WAAW,KAAK,UAAU,IAAI+J,UAAU,CAAC,CAAC;EAAA;IAAAzB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACrE,CAAC;AAEV;AAACjK,EAAA,CAniBuBD,GAAG;EAAA,QACFlB,aAAa,EACrBC,SAAS;AAAA;AAAAmN,EAAA,GAFFlM,GAAG;AAAA,IAAAkM,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}