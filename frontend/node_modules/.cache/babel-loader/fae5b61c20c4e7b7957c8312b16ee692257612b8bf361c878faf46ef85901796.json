{"ast":null,"code":"import * as anchor from \"@coral-xyz/anchor\";\nimport { Connection, clusterApiUrl, PublicKey } from \"@solana/web3.js\";\nimport { AnchorProvider, Program } from \"@coral-xyz/anchor\";\nimport idl from \"./idl/typeracer_escrow.json\";\nlet provider;\nlet program;\n\n/**\n * Setup and return Anchor provider and program instance.\n * Should be called after wallet connection.\n */\nexport function setProvider(wallet) {\n  if (!wallet) throw new Error(\"Wallet not connected\");\n\n  // Determine cluster and RPC endpoint\n  const network = process.env.REACT_APP_SOLANA_NETWORK || \"mainnet-beta\";\n  const rpcEndpoint = process.env.REACT_APP_SOLANA_RPC || clusterApiUrl(network);\n\n  // Create connection and provider\n  const connection = new Connection(rpcEndpoint, \"confirmed\");\n  provider = new AnchorProvider(connection, wallet, {\n    preflightCommitment: \"confirmed\",\n    commitment: \"confirmed\"\n  });\n\n  // Pull the Program ID out of the IDL metadata and instantiate\n  const programId = new PublicKey(idl.metadata.address);\n  program = new Program(idl, programId, provider);\n  return program;\n}\n\n/**\n * Returns the current Anchor program instance.\n * Throws if provider/program not initialized.\n */\nexport function getProgram() {\n  if (!program) {\n    throw new Error(\"Program not initialized. Call setProvider(wallet) first.\");\n  }\n  return program;\n}\n\n/**\n * Returns current Anchor provider instance.\n */\nexport function getProvider() {\n  if (!provider) {\n    throw new Error(\"Provider not initialized. Call setProvider(wallet) first.\");\n  }\n  return provider;\n}","map":{"version":3,"names":["anchor","Connection","clusterApiUrl","PublicKey","AnchorProvider","Program","idl","provider","program","setProvider","wallet","Error","network","process","env","REACT_APP_SOLANA_NETWORK","rpcEndpoint","REACT_APP_SOLANA_RPC","connection","preflightCommitment","commitment","programId","metadata","address","getProgram","getProvider"],"sources":["/home/kokoi/sol-wager-app/frontend/src/solana.js"],"sourcesContent":["import * as anchor from \"@coral-xyz/anchor\";\nimport { Connection, clusterApiUrl, PublicKey } from \"@solana/web3.js\";\nimport { AnchorProvider, Program } from \"@coral-xyz/anchor\";\nimport idl from \"./idl/typeracer_escrow.json\";\n\nlet provider;\nlet program;\n\n/**\n * Setup and return Anchor provider and program instance.\n * Should be called after wallet connection.\n */\nexport function setProvider(wallet) {\n  if (!wallet) throw new Error(\"Wallet not connected\");\n\n  // Determine cluster and RPC endpoint\n  const network = process.env.REACT_APP_SOLANA_NETWORK || \"mainnet-beta\";\n  const rpcEndpoint =\n    process.env.REACT_APP_SOLANA_RPC || clusterApiUrl(network);\n\n  // Create connection and provider\n  const connection = new Connection(rpcEndpoint, \"confirmed\");\n  provider = new AnchorProvider(connection, wallet, {\n    preflightCommitment: \"confirmed\",\n    commitment: \"confirmed\",\n  });\n\n  // Pull the Program ID out of the IDL metadata and instantiate\n  const programId = new PublicKey(idl.metadata.address);\n  program = new Program(idl, programId, provider);\n\n  return program;\n}\n\n/**\n * Returns the current Anchor program instance.\n * Throws if provider/program not initialized.\n */\nexport function getProgram() {\n  if (!program) {\n    throw new Error(\n      \"Program not initialized. Call setProvider(wallet) first.\"\n    );\n  }\n  return program;\n}\n\n/**\n * Returns current Anchor provider instance.\n */\nexport function getProvider() {\n  if (!provider) {\n    throw new Error(\n      \"Provider not initialized. Call setProvider(wallet) first.\"\n    );\n  }\n  return provider;\n}\n"],"mappings":"AAAA,OAAO,KAAKA,MAAM,MAAM,mBAAmB;AAC3C,SAASC,UAAU,EAAEC,aAAa,EAAEC,SAAS,QAAQ,iBAAiB;AACtE,SAASC,cAAc,EAAEC,OAAO,QAAQ,mBAAmB;AAC3D,OAAOC,GAAG,MAAM,6BAA6B;AAE7C,IAAIC,QAAQ;AACZ,IAAIC,OAAO;;AAEX;AACA;AACA;AACA;AACA,OAAO,SAASC,WAAWA,CAACC,MAAM,EAAE;EAClC,IAAI,CAACA,MAAM,EAAE,MAAM,IAAIC,KAAK,CAAC,sBAAsB,CAAC;;EAEpD;EACA,MAAMC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,wBAAwB,IAAI,cAAc;EACtE,MAAMC,WAAW,GACfH,OAAO,CAACC,GAAG,CAACG,oBAAoB,IAAIf,aAAa,CAACU,OAAO,CAAC;;EAE5D;EACA,MAAMM,UAAU,GAAG,IAAIjB,UAAU,CAACe,WAAW,EAAE,WAAW,CAAC;EAC3DT,QAAQ,GAAG,IAAIH,cAAc,CAACc,UAAU,EAAER,MAAM,EAAE;IAChDS,mBAAmB,EAAE,WAAW;IAChCC,UAAU,EAAE;EACd,CAAC,CAAC;;EAEF;EACA,MAAMC,SAAS,GAAG,IAAIlB,SAAS,CAACG,GAAG,CAACgB,QAAQ,CAACC,OAAO,CAAC;EACrDf,OAAO,GAAG,IAAIH,OAAO,CAACC,GAAG,EAAEe,SAAS,EAAEd,QAAQ,CAAC;EAE/C,OAAOC,OAAO;AAChB;;AAEA;AACA;AACA;AACA;AACA,OAAO,SAASgB,UAAUA,CAAA,EAAG;EAC3B,IAAI,CAAChB,OAAO,EAAE;IACZ,MAAM,IAAIG,KAAK,CACb,0DACF,CAAC;EACH;EACA,OAAOH,OAAO;AAChB;;AAEA;AACA;AACA;AACA,OAAO,SAASiB,WAAWA,CAAA,EAAG;EAC5B,IAAI,CAAClB,QAAQ,EAAE;IACb,MAAM,IAAII,KAAK,CACb,2DACF,CAAC;EACH;EACA,OAAOJ,QAAQ;AACjB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}