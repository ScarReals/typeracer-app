{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst buffer_1 = require(\"buffer\");\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst common_js_1 = require(\"./utils/common.js\");\n/**\n * Node only wallet.\n */\nclass NodeWallet {\n  constructor(payer) {\n    this.payer = payer;\n  }\n  static local() {\n    const process = require(\"process\");\n    if (!process.env.ANCHOR_WALLET || process.env.ANCHOR_WALLET === \"\") {\n      throw new Error(\"expected environment variable `ANCHOR_WALLET` is not set.\");\n    }\n    const payer = web3_js_1.Keypair.fromSecretKey(buffer_1.Buffer.from(JSON.parse(require(\"fs\").readFileSync(process.env.ANCHOR_WALLET, {\n      encoding: \"utf-8\"\n    }))));\n    return new NodeWallet(payer);\n  }\n  async signTransaction(tx) {\n    if ((0, common_js_1.isVersionedTransaction)(tx)) {\n      tx.sign([this.payer]);\n    } else {\n      tx.partialSign(this.payer);\n    }\n    return tx;\n  }\n  async signAllTransactions(txs) {\n    return txs.map(t => {\n      if ((0, common_js_1.isVersionedTransaction)(t)) {\n        t.sign([this.payer]);\n      } else {\n        t.partialSign(this.payer);\n      }\n      return t;\n    });\n  }\n  get publicKey() {\n    return this.payer.publicKey;\n  }\n}\nexports.default = NodeWallet;","map":{"version":3,"names":["buffer_1","require","web3_js_1","common_js_1","NodeWallet","constructor","payer","local","process","env","ANCHOR_WALLET","Error","Keypair","fromSecretKey","Buffer","from","JSON","parse","readFileSync","encoding","signTransaction","tx","isVersionedTransaction","sign","partialSign","signAllTransactions","txs","map","t","publicKey","exports","default"],"sources":["../../src/nodewallet.ts"],"sourcesContent":[null],"mappings":";;;;;AAAA,MAAAA,QAAA,GAAAC,OAAA;AACA,MAAAC,SAAA,GAAAD,OAAA;AAOA,MAAAE,WAAA,GAAAF,OAAA;AAEA;;;AAGA,MAAqBG,UAAU;EAC7BC,YAAqBC,KAAc;IAAd,KAAAA,KAAK,GAALA,KAAK;EAAY;EAEtC,OAAOC,KAAKA,CAAA;IACV,MAAMC,OAAO,GAAGP,OAAO,CAAC,SAAS,CAAC;IAElC,IAAI,CAACO,OAAO,CAACC,GAAG,CAACC,aAAa,IAAIF,OAAO,CAACC,GAAG,CAACC,aAAa,KAAK,EAAE,EAAE;MAClE,MAAM,IAAIC,KAAK,CACb,2DAA2D,CAC5D;;IAGH,MAAML,KAAK,GAAGJ,SAAA,CAAAU,OAAO,CAACC,aAAa,CACjCb,QAAA,CAAAc,MAAM,CAACC,IAAI,CACTC,IAAI,CAACC,KAAK,CACRhB,OAAO,CAAC,IAAI,CAAC,CAACiB,YAAY,CAACV,OAAO,CAACC,GAAG,CAACC,aAAa,EAAE;MACpDS,QAAQ,EAAE;KACX,CAAC,CACH,CACF,CACF;IAED,OAAO,IAAIf,UAAU,CAACE,KAAK,CAAC;EAC9B;EAEA,MAAMc,eAAeA,CACnBC,EAAK;IAEL,IAAI,IAAAlB,WAAA,CAAAmB,sBAAsB,EAACD,EAAE,CAAC,EAAE;MAC9BA,EAAE,CAACE,IAAI,CAAC,CAAC,IAAI,CAACjB,KAAK,CAAC,CAAC;KACtB,MAAM;MACLe,EAAE,CAACG,WAAW,CAAC,IAAI,CAAClB,KAAK,CAAC;;IAG5B,OAAOe,EAAE;EACX;EAEA,MAAMI,mBAAmBA,CACvBC,GAAQ;IAER,OAAOA,GAAG,CAACC,GAAG,CAAEC,CAAC,IAAI;MACnB,IAAI,IAAAzB,WAAA,CAAAmB,sBAAsB,EAACM,CAAC,CAAC,EAAE;QAC7BA,CAAC,CAACL,IAAI,CAAC,CAAC,IAAI,CAACjB,KAAK,CAAC,CAAC;OACrB,MAAM;QACLsB,CAAC,CAACJ,WAAW,CAAC,IAAI,CAAClB,KAAK,CAAC;;MAE3B,OAAOsB,CAAC;IACV,CAAC,CAAC;EACJ;EAEA,IAAIC,SAASA,CAAA;IACX,OAAO,IAAI,CAACvB,KAAK,CAACuB,SAAS;EAC7B;;AApDFC,OAAA,CAAAC,OAAA,GAAA3B,UAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}