{"ast":null,"code":"import * as anchor from \"@coral-xyz/anchor\";\nimport { Connection, clusterApiUrl, PublicKey } from \"@solana/web3.js\";\nimport idl from \"./idl/typeracer_escrow.json\";\n\n// Program ID from the IDL (use idl.address, not metadata.address)\nconst PROGRAM_ID = new PublicKey(idl.address);\n\n/**\n * Call this once, after your wallet connects.\n * It creates an AnchorProvider and sets it as the global provider.\n */\nexport function setProvider(wallet) {\n  if (!wallet || !wallet.publicKey) {\n    throw new Error(\"Wallet not connected\");\n  }\n\n  // Choose cluster\n  const network = process.env.REACT_APP_SOLANA_NETWORK || \"mainnet-beta\";\n  const rpcEndpoint = process.env.REACT_APP_SOLANA_RPC || clusterApiUrl(network);\n\n  // Build a connection + provider\n  const connection = new Connection(rpcEndpoint, \"confirmed\");\n  const provider = new anchor.AnchorProvider(connection, wallet, {\n    preflightCommitment: \"confirmed\",\n    commitment: \"confirmed\"\n  });\n\n  // Install as the global provider for anchor.getProvider()\n  anchor.setProvider(provider);\n}\n\n/**\n * Returns the current global AnchorProvider.\n * You must have called setProvider() first.\n */\nexport function getProvider() {\n  return anchor.getProvider();\n}\n\n/**\n * Returns a typed Program client for your escrow program.\n * You must have called setProvider() first.\n */\nexport function getProgram() {\n  const provider = anchor.getProvider();\n  return new anchor.Program(idl, PROGRAM_ID, provider);\n}","map":{"version":3,"names":["anchor","Connection","clusterApiUrl","PublicKey","idl","PROGRAM_ID","address","setProvider","wallet","publicKey","Error","network","process","env","REACT_APP_SOLANA_NETWORK","rpcEndpoint","REACT_APP_SOLANA_RPC","connection","provider","AnchorProvider","preflightCommitment","commitment","getProvider","getProgram","Program"],"sources":["/home/kokoi/sol-wager-app/frontend/src/solana.js"],"sourcesContent":["import * as anchor from \"@coral-xyz/anchor\";\nimport { Connection, clusterApiUrl, PublicKey } from \"@solana/web3.js\";\nimport idl from \"./idl/typeracer_escrow.json\";\n\n// Program ID from the IDL (use idl.address, not metadata.address)\nconst PROGRAM_ID = new PublicKey(idl.address);\n\n/**\n * Call this once, after your wallet connects.\n * It creates an AnchorProvider and sets it as the global provider.\n */\nexport function setProvider(wallet) {\n  if (!wallet || !wallet.publicKey) {\n    throw new Error(\"Wallet not connected\");\n  }\n\n  // Choose cluster\n  const network = process.env.REACT_APP_SOLANA_NETWORK || \"mainnet-beta\";\n  const rpcEndpoint =\n    process.env.REACT_APP_SOLANA_RPC || clusterApiUrl(network);\n\n  // Build a connection + provider\n  const connection = new Connection(rpcEndpoint, \"confirmed\");\n  const provider = new anchor.AnchorProvider(connection, wallet, {\n    preflightCommitment: \"confirmed\",\n    commitment: \"confirmed\",\n  });\n\n  // Install as the global provider for anchor.getProvider()\n  anchor.setProvider(provider);\n}\n\n/**\n * Returns the current global AnchorProvider.\n * You must have called setProvider() first.\n */\nexport function getProvider() {\n  return anchor.getProvider();\n}\n\n/**\n * Returns a typed Program client for your escrow program.\n * You must have called setProvider() first.\n */\nexport function getProgram() {\n  const provider = anchor.getProvider();\n  return new anchor.Program(idl, PROGRAM_ID, provider);\n}\n"],"mappings":"AAAA,OAAO,KAAKA,MAAM,MAAM,mBAAmB;AAC3C,SAASC,UAAU,EAAEC,aAAa,EAAEC,SAAS,QAAQ,iBAAiB;AACtE,OAAOC,GAAG,MAAM,6BAA6B;;AAE7C;AACA,MAAMC,UAAU,GAAG,IAAIF,SAAS,CAACC,GAAG,CAACE,OAAO,CAAC;;AAE7C;AACA;AACA;AACA;AACA,OAAO,SAASC,WAAWA,CAACC,MAAM,EAAE;EAClC,IAAI,CAACA,MAAM,IAAI,CAACA,MAAM,CAACC,SAAS,EAAE;IAChC,MAAM,IAAIC,KAAK,CAAC,sBAAsB,CAAC;EACzC;;EAEA;EACA,MAAMC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,wBAAwB,IAAI,cAAc;EACtE,MAAMC,WAAW,GACfH,OAAO,CAACC,GAAG,CAACG,oBAAoB,IAAId,aAAa,CAACS,OAAO,CAAC;;EAE5D;EACA,MAAMM,UAAU,GAAG,IAAIhB,UAAU,CAACc,WAAW,EAAE,WAAW,CAAC;EAC3D,MAAMG,QAAQ,GAAG,IAAIlB,MAAM,CAACmB,cAAc,CAACF,UAAU,EAAET,MAAM,EAAE;IAC7DY,mBAAmB,EAAE,WAAW;IAChCC,UAAU,EAAE;EACd,CAAC,CAAC;;EAEF;EACArB,MAAM,CAACO,WAAW,CAACW,QAAQ,CAAC;AAC9B;;AAEA;AACA;AACA;AACA;AACA,OAAO,SAASI,WAAWA,CAAA,EAAG;EAC5B,OAAOtB,MAAM,CAACsB,WAAW,CAAC,CAAC;AAC7B;;AAEA;AACA;AACA;AACA;AACA,OAAO,SAASC,UAAUA,CAAA,EAAG;EAC3B,MAAML,QAAQ,GAAGlB,MAAM,CAACsB,WAAW,CAAC,CAAC;EACrC,OAAO,IAAItB,MAAM,CAACwB,OAAO,CAACpB,GAAG,EAAEC,UAAU,EAAEa,QAAQ,CAAC;AACtD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}