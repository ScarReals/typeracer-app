{"ast":null,"code":"// frontend/src/escrow.js\nimport * as anchor from \"@coral-xyz/anchor\";\nimport { getProgram } from \"./solana\";\n\n/** \n * Wait up to 60 s for a transaction to reach the given commitment \n */\nasync function waitForConfirmation(connection, signature, commitment = \"processed\") {\n  const start = Date.now();\n  while (true) {\n    const resp = await connection.getSignatureStatuses([signature]);\n    const info = resp.value[0];\n    if (info && info.confirmationStatus === commitment) return info;\n    if (Date.now() - start > 60000) {\n      throw new Error(`Timeout confirming transaction ${signature}`);\n    }\n    await new Promise(r => setTimeout(r, 500));\n  }\n}\n\n/**\n * NEW: Bundles initialize + deposit into a single on‑chain Transaction.\n * Returns the PDA used.\n */\nexport async function initializeAndDeposit(wagerLamports) {\n  const program = getProgram();\n  const connection = program.provider.connection;\n  const walletPk = program.provider.wallet.publicKey;\n\n  // 1) Derive nonce & PDA\n  const nonce = new anchor.BN(Math.floor(Math.random() * Number.MAX_SAFE_INTEGER), 10, \"le\");\n  const [escrowPda] = await anchor.web3.PublicKey.findProgramAddress([Buffer.from(\"escrow\"), walletPk.toBuffer(), nonce.toArrayLike(Buffer, \"le\", 8)], program.programId);\n\n  // 2) Build tx with both ix\n  const tx = new anchor.web3.Transaction();\n  tx.add(await program.methods.initialize(new anchor.BN(wagerLamports), nonce).accounts({\n    escrow: escrowPda,\n    player1: walletPk,\n    authority: walletPk,\n    systemProgram: anchor.web3.SystemProgram.programId\n  }).instruction());\n  tx.add(await program.methods.deposit().accounts({\n    escrow: escrowPda,\n    payer: walletPk,\n    escrowAccount: escrowPda,\n    systemProgram: anchor.web3.SystemProgram.programId\n  }).instruction());\n\n  // 3) Sign, send, and confirm\n  const {\n    blockhash,\n    lastValidBlockHeight\n  } = await connection.getLatestBlockhash(\"processed\");\n  tx.recentBlockhash = blockhash;\n  tx.feePayer = walletPk;\n  const signed = await program.provider.wallet.signTransaction(tx);\n  const signature = await connection.sendRawTransaction(signed.serialize(), {\n    skipPreflight: false,\n    preflightCommitment: \"processed\"\n  });\n  await waitForConfirmation(connection, signature, \"processed\");\n  return escrowPda;\n}\n\n/**\n * OLD: Initialize (only) and return PDA. Usage: two‑step when you want separate flows.\n */\nexport async function initializeEscrow(wagerLamports) {\n  const pda = await initializeAndDeposit(wagerLamports);\n  return pda;\n}\n\n/**\n * Join the escrow. Returns tx signature.\n */\nexport async function joinEscrow(escrowPda) {\n  const program = getProgram();\n  const connection = program.provider.connection;\n  let sig;\n  try {\n    sig = await program.methods.join().accounts({\n      escrow: escrowPda,\n      player2: program.provider.wallet.publicKey\n    }).rpc({\n      skipPreflight: false,\n      preflightCommitment: \"processed\",\n      commitment: \"processed\"\n    });\n    await waitForConfirmation(connection, sig, \"processed\");\n    return sig;\n  } catch (e) {\n    console.error(\"joinEscrow failed:\", e);\n    if (e.getLogs) console.error(\"Logs:\", await e.getLogs());else if (e.logs) console.error(\"Logs:\", e.logs);\n    throw e;\n  }\n}\n\n/**\n * Deposit into the escrow. Returns tx signature.\n */\nexport async function depositToEscrow(escrowPda) {\n  const program = getProgram();\n  const connection = program.provider.connection;\n  let sig;\n  try {\n    sig = await program.methods.deposit().accounts({\n      escrow: escrowPda,\n      payer: program.provider.wallet.publicKey,\n      escrowAccount: escrowPda,\n      systemProgram: anchor.web3.SystemProgram.programId\n    }).rpc({\n      skipPreflight: false,\n      preflightCommitment: \"processed\",\n      commitment: \"processed\"\n    });\n    await waitForConfirmation(connection, sig, \"processed\");\n    return sig;\n  } catch (e) {\n    console.error(\"depositToEscrow failed:\", e);\n    if (e.getLogs) console.error(\"Logs:\", await e.getLogs());else if (e.logs) console.error(\"Logs:\", e.logs);\n    throw e;\n  }\n}\n\n/**\n * Resolve the escrow, paying out winner + house. Returns tx signature.\n */\nexport async function resolveEscrow(escrowPda, winnerPubkey) {\n  const program = getProgram();\n  const connection = program.provider.connection;\n  const house = new anchor.web3.PublicKey(\"A32Burni3cYyFAqjZM3CvCrStAKRFCfftk196Xfpx9Hs\");\n  let sig;\n  try {\n    sig = await program.methods.resolve(winnerPubkey).accounts({\n      escrow: escrowPda,\n      winner: winnerPubkey,\n      house,\n      escrowAccount: escrowPda,\n      authority: program.provider.wallet.publicKey\n    }).rpc({\n      skipPreflight: false,\n      preflightCommitment: \"processed\",\n      commitment: \"processed\"\n    });\n    await waitForConfirmation(connection, sig, \"processed\");\n    return sig;\n  } catch (e) {\n    console.error(\"resolveEscrow failed:\", e);\n    if (e.getLogs) console.error(\"Logs:\", await e.getLogs());else if (e.logs) console.error(\"Logs:\", e.logs);\n    throw e;\n  }\n}\n\n/**\n * Cancel the escrow and refund both players. Returns tx signature.\n */\nexport async function cancelEscrow(escrowPda, player1, player2) {\n  const program = getProgram();\n  const connection = program.provider.connection;\n  let sig;\n  try {\n    sig = await program.methods.cancel().accounts({\n      escrow: escrowPda,\n      player1,\n      player2,\n      escrowAccount: escrowPda,\n      authority: program.provider.wallet.publicKey\n    }).rpc({\n      skipPreflight: false,\n      preflightCommitment: \"processed\",\n      commitment: \"processed\"\n    });\n    await waitForConfirmation(connection, sig, \"processed\");\n    return sig;\n  } catch (e) {\n    console.error(\"cancelEscrow failed:\", e);\n    if (e.getLogs) console.error(\"Logs:\", await e.getLogs());else if (e.logs) console.error(\"Logs:\", e.logs);\n    throw e;\n  }\n}","map":{"version":3,"names":["anchor","getProgram","waitForConfirmation","connection","signature","commitment","start","Date","now","resp","getSignatureStatuses","info","value","confirmationStatus","Error","Promise","r","setTimeout","initializeAndDeposit","wagerLamports","program","provider","walletPk","wallet","publicKey","nonce","BN","Math","floor","random","Number","MAX_SAFE_INTEGER","escrowPda","web3","PublicKey","findProgramAddress","Buffer","from","toBuffer","toArrayLike","programId","tx","Transaction","add","methods","initialize","accounts","escrow","player1","authority","systemProgram","SystemProgram","instruction","deposit","payer","escrowAccount","blockhash","lastValidBlockHeight","getLatestBlockhash","recentBlockhash","feePayer","signed","signTransaction","sendRawTransaction","serialize","skipPreflight","preflightCommitment","initializeEscrow","pda","joinEscrow","sig","join","player2","rpc","e","console","error","getLogs","logs","depositToEscrow","resolveEscrow","winnerPubkey","house","resolve","winner","cancelEscrow","cancel"],"sources":["/home/kokoi/sol-wager-app/frontend/src/escrow.js"],"sourcesContent":["// frontend/src/escrow.js\nimport * as anchor from \"@coral-xyz/anchor\";\nimport { getProgram } from \"./solana\";\n\n/** \n * Wait up to 60 s for a transaction to reach the given commitment \n */\nasync function waitForConfirmation(connection, signature, commitment = \"processed\") {\n  const start = Date.now();\n  while (true) {\n    const resp = await connection.getSignatureStatuses([signature]);\n    const info = resp.value[0];\n    if (info && info.confirmationStatus === commitment) return info;\n    if (Date.now() - start > 60_000) {\n      throw new Error(`Timeout confirming transaction ${signature}`);\n    }\n    await new Promise((r) => setTimeout(r, 500));\n  }\n}\n\n/**\n * NEW: Bundles initialize + deposit into a single on‑chain Transaction.\n * Returns the PDA used.\n */\nexport async function initializeAndDeposit(wagerLamports) {\n  const program = getProgram();\n  const connection = program.provider.connection;\n  const walletPk = program.provider.wallet.publicKey;\n\n  // 1) Derive nonce & PDA\n  const nonce = new anchor.BN(\n    Math.floor(Math.random() * Number.MAX_SAFE_INTEGER),\n    10,\n    \"le\"\n  );\n  const [escrowPda] = await anchor.web3.PublicKey.findProgramAddress(\n    [\n      Buffer.from(\"escrow\"),\n      walletPk.toBuffer(),\n      nonce.toArrayLike(Buffer, \"le\", 8),\n    ],\n    program.programId\n  );\n\n  // 2) Build tx with both ix\n  const tx = new anchor.web3.Transaction();\n  tx.add(\n    await program.methods\n      .initialize(new anchor.BN(wagerLamports), nonce)\n      .accounts({\n        escrow: escrowPda,\n        player1: walletPk,\n        authority: walletPk,\n        systemProgram: anchor.web3.SystemProgram.programId,\n      })\n      .instruction()\n  );\n  tx.add(\n    await program.methods\n      .deposit()\n      .accounts({\n        escrow: escrowPda,\n        payer: walletPk,\n        escrowAccount: escrowPda,\n        systemProgram: anchor.web3.SystemProgram.programId,\n      })\n      .instruction()\n  );\n\n  // 3) Sign, send, and confirm\n  const { blockhash, lastValidBlockHeight } =\n    await connection.getLatestBlockhash(\"processed\");\n  tx.recentBlockhash = blockhash;\n  tx.feePayer = walletPk;\n\n  const signed = await program.provider.wallet.signTransaction(tx);\n  const signature = await connection.sendRawTransaction(signed.serialize(), {\n    skipPreflight: false,\n    preflightCommitment: \"processed\",\n  });\n  await waitForConfirmation(connection, signature, \"processed\");\n\n  return escrowPda;\n}\n\n/**\n * OLD: Initialize (only) and return PDA. Usage: two‑step when you want separate flows.\n */\nexport async function initializeEscrow(wagerLamports) {\n  const pda = await initializeAndDeposit(wagerLamports);\n  return pda;\n}\n\n/**\n * Join the escrow. Returns tx signature.\n */\nexport async function joinEscrow(escrowPda) {\n  const program = getProgram();\n  const connection = program.provider.connection;\n  let sig;\n  try {\n    sig = await program.methods\n      .join()\n      .accounts({\n        escrow: escrowPda,\n        player2: program.provider.wallet.publicKey,\n      })\n      .rpc({\n        skipPreflight: false,\n        preflightCommitment: \"processed\",\n        commitment: \"processed\",\n      });\n    await waitForConfirmation(connection, sig, \"processed\");\n    return sig;\n  } catch (e) {\n    console.error(\"joinEscrow failed:\", e);\n    if (e.getLogs) console.error(\"Logs:\", await e.getLogs());\n    else if (e.logs) console.error(\"Logs:\", e.logs);\n    throw e;\n  }\n}\n\n/**\n * Deposit into the escrow. Returns tx signature.\n */\nexport async function depositToEscrow(escrowPda) {\n  const program = getProgram();\n  const connection = program.provider.connection;\n  let sig;\n  try {\n    sig = await program.methods\n      .deposit()\n      .accounts({\n        escrow: escrowPda,\n        payer: program.provider.wallet.publicKey,\n        escrowAccount: escrowPda,\n        systemProgram: anchor.web3.SystemProgram.programId,\n      })\n      .rpc({\n        skipPreflight: false,\n        preflightCommitment: \"processed\",\n        commitment: \"processed\",\n      });\n    await waitForConfirmation(connection, sig, \"processed\");\n    return sig;\n  } catch (e) {\n    console.error(\"depositToEscrow failed:\", e);\n    if (e.getLogs) console.error(\"Logs:\", await e.getLogs());\n    else if (e.logs) console.error(\"Logs:\", e.logs);\n    throw e;\n  }\n}\n\n/**\n * Resolve the escrow, paying out winner + house. Returns tx signature.\n */\nexport async function resolveEscrow(escrowPda, winnerPubkey) {\n  const program = getProgram();\n  const connection = program.provider.connection;\n  const house = new anchor.web3.PublicKey(\n    \"A32Burni3cYyFAqjZM3CvCrStAKRFCfftk196Xfpx9Hs\"\n  );\n  let sig;\n  try {\n    sig = await program.methods\n      .resolve(winnerPubkey)\n      .accounts({\n        escrow: escrowPda,\n        winner: winnerPubkey,\n        house,\n        escrowAccount: escrowPda,\n        authority: program.provider.wallet.publicKey,\n      })\n      .rpc({\n        skipPreflight: false,\n        preflightCommitment: \"processed\",\n        commitment: \"processed\",\n      });\n    await waitForConfirmation(connection, sig, \"processed\");\n    return sig;\n  } catch (e) {\n    console.error(\"resolveEscrow failed:\", e);\n    if (e.getLogs) console.error(\"Logs:\", await e.getLogs());\n    else if (e.logs) console.error(\"Logs:\", e.logs);\n    throw e;\n  }\n}\n\n/**\n * Cancel the escrow and refund both players. Returns tx signature.\n */\nexport async function cancelEscrow(escrowPda, player1, player2) {\n  const program = getProgram();\n  const connection = program.provider.connection;\n  let sig;\n  try {\n    sig = await program.methods\n      .cancel()\n      .accounts({\n        escrow: escrowPda,\n        player1,\n        player2,\n        escrowAccount: escrowPda,\n        authority: program.provider.wallet.publicKey,\n      })\n      .rpc({\n        skipPreflight: false,\n        preflightCommitment: \"processed\",\n        commitment: \"processed\",\n      });\n    await waitForConfirmation(connection, sig, \"processed\");\n    return sig;\n  } catch (e) {\n    console.error(\"cancelEscrow failed:\", e);\n    if (e.getLogs) console.error(\"Logs:\", await e.getLogs());\n    else if (e.logs) console.error(\"Logs:\", e.logs);\n    throw e;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}