{"ast":null,"code":"var _jsxFileName = \"/home/kokoi/sol-wager-app/frontend/src/App.jsx\",\n  _s = $RefreshSig$();\n// src/App.jsx\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport \"./App.css\";\nimport sentences from \"./sentences\";\nimport { useConnection, useWallet } from \"@solana/wallet-adapter-react\";\nimport { WalletMultiButton } from \"@solana/wallet-adapter-react-ui\";\nimport { LAMPORTS_PER_SOL, PublicKey, Transaction } from \"@solana/web3.js\";\nimport socket from \"./socket\";\nimport * as anchor from \"@coral-xyz/anchor\";\nimport { setProvider } from \"./solana\";\nimport { buildInitializeAndDepositIxns, buildJoinAndDepositIxn, buildCancelIxn } from \"./escrow\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function App() {\n  _s();\n  const {\n    connection\n  } = useConnection();\n  const wallet = useWallet();\n  const {\n    publicKey,\n    connected\n  } = wallet;\n  const walletAddress = (publicKey === null || publicKey === void 0 ? void 0 : publicKey.toBase58()) || \"\";\n\n  // keep a ref to the latest wallet address for socket callbacks\n  const walletAddressRef = useRef(walletAddress);\n  useEffect(() => {\n    walletAddressRef.current = walletAddress;\n  }, [walletAddress]);\n\n  // set up Anchor + provider\n  useEffect(() => {\n    if (connected && connection) {\n      const prov = new anchor.AnchorProvider(connection, wallet, {\n        preflightCommitment: \"confirmed\",\n        commitment: \"confirmed\"\n      });\n      anchor.setProvider(prov);\n      setProvider(wallet);\n    }\n  }, [connected, connection, wallet]);\n\n  // track SOL balance\n  const [walletBalance, setWalletBalance] = useState(0);\n  useEffect(() => {\n    if (connection && publicKey) {\n      connection.getBalance(publicKey).then(lamports => {\n        setWalletBalance(lamports / LAMPORTS_PER_SOL);\n      });\n    }\n  }, [connection, publicKey]);\n\n  // game state\n  const [wager, setWager] = useState(1);\n  const [openMatches, setOpenMatches] = useState([]);\n  const [currentMatch, setCurrentMatch] = useState(null);\n  const [matchStatus, setMatchStatus] = useState(\"waiting\");\n\n  // race state\n  const [sentence, setSentence] = useState(\"\");\n  const [inputValue, setInputValue] = useState(\"\");\n  const [playerProgress, setPlayerProgress] = useState(0);\n  const [opponentProgress, setOpponentProgress] = useState(0);\n  const [countdown, setCountdown] = useState(3);\n  const [raceResult, setRaceResult] = useState(null);\n  const [isInputDisabled, setIsInputDisabled] = useState(false);\n  const [isAccepting, setIsAccepting] = useState(false);\n  const [opponentWallet, setOpponentWallet] = useState(null);\n\n  // chat\n  const [chatMessages, setChatMessages] = useState([]);\n  const [chatInput, setChatInput] = useState(\"\");\n  const inputRef = useRef(null);\n  const API = process.env.REACT_APP_API_URL;\n\n  // anti‚Äëcheat\n  const [lastProgTime, setLastProgTime] = useState(Date.now());\n  const [lastProg, setLastProg] = useState(0);\n  const MAX_CPS = 20;\n\n  // pick a consistent sentence based on match ID\n  const chooseSentence = id => sentences[Array.from(id).reduce((a, c) => a + c.charCodeAt(0), 0) % sentences.length];\n  const fetchOpenMatches = async () => {\n    try {\n      const res = await fetch(`${API}/wagers`);\n      setOpenMatches(await res.json());\n    } catch {}\n  };\n  const resetGame = () => {\n    setCurrentMatch(null);\n    setMatchStatus(\"waiting\");\n    setSentence(\"\");\n    setInputValue(\"\");\n    setPlayerProgress(0);\n    setOpponentProgress(0);\n    setCountdown(3);\n    setRaceResult(null);\n    setIsInputDisabled(false);\n    setOpponentWallet(null);\n    setLastProg(0);\n    setLastProgTime(Date.now());\n    fetchOpenMatches();\n  };\n\n  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ SOCKET SETUP ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n  useEffect(() => {\n    socket.connect();\n    socket.on(\"openMatches\", setOpenMatches);\n    socket.on(\"newMatch\", m => setOpenMatches(os => [...os, m]));\n    socket.on(\"removeMatch\", id => setOpenMatches(os => os.filter(m => m.id !== id)));\n    socket.on(\"startMatch\", ({\n      id,\n      players\n    }) => {\n      if (!currentMatch || currentMatch.id !== id) {\n        setCurrentMatch({\n          id,\n          amount: (currentMatch === null || currentMatch === void 0 ? void 0 : currentMatch.amount) || 0,\n          creator: players[0],\n          accepter: players[1]\n        });\n      }\n      setMatchStatus(\"ready\");\n      setSentence(chooseSentence(id));\n      setCountdown(3);\n      setOpponentWallet(players.find(w => w !== walletAddressRef.current));\n    });\n    socket.on(\"opponentProgress\", ({\n      wallet: w,\n      progress\n    }) => {\n      if (w !== walletAddressRef.current) setOpponentProgress(progress);\n    });\n    socket.on(\"raceEnd\", ({\n      winner,\n      progressMap\n    }) => {\n      setMatchStatus(\"finished\");\n      setIsInputDisabled(true);\n      setRaceResult({\n        result: winner === walletAddressRef.current ? \"win\" : \"lose\"\n      });\n      if (progressMap) {\n        var _progressMap$walletAd, _progressMap$opponent;\n        setPlayerProgress((_progressMap$walletAd = progressMap[walletAddressRef.current]) !== null && _progressMap$walletAd !== void 0 ? _progressMap$walletAd : 0);\n        setOpponentProgress((_progressMap$opponent = progressMap[opponentWallet]) !== null && _progressMap$opponent !== void 0 ? _progressMap$opponent : 0);\n      }\n    });\n    socket.on(\"chat\", setChatMessages);\n    socket.on(\"opponentLeft\", () => {\n      resetGame();\n    });\n\n    // initial load\n    fetchOpenMatches();\n    return () => {\n      socket.removeAllListeners();\n      socket.disconnect();\n    };\n  }, []); // run once\n\n  // countdown to race start\n  useEffect(() => {\n    if (matchStatus === \"ready\" && countdown > 0) {\n      const t = setTimeout(() => setCountdown(c => c - 1), 1000);\n      return () => clearTimeout(t);\n    } else if (matchStatus === \"ready\" && countdown === 0) {\n      var _inputRef$current;\n      setMatchStatus(\"racing\");\n      setIsInputDisabled(false);\n      (_inputRef$current = inputRef.current) === null || _inputRef$current === void 0 ? void 0 : _inputRef$current.focus();\n    }\n  }, [countdown, matchStatus]);\n\n  // ‚îÄ‚îÄ‚îÄ createMatch ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n  async function createMatch() {\n    if (!connected) return alert(\"Connect wallet\");\n    const lamports = Math.floor(wager * LAMPORTS_PER_SOL);\n\n    // only pass wagerLamports here\n    const {\n      ixInit,\n      ixDeposit,\n      escrowPda\n    } = await buildInitializeAndDepositIxns(lamports);\n    const tx = new Transaction().add(ixInit, ixDeposit);\n    const sig = await wallet.sendTransaction(tx, connection);\n    console.log(\"createMatch tx:\", sig);\n\n    // register with backend\n    const id = escrowPda.toBase58();\n    await fetch(`${API}/wagers`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        id,\n        amount: Number(wager),\n        creator: walletAddressRef,\n        feePercent: 5,\n        vault: escrowPda.toBase58()\n      })\n    });\n    setCurrentMatch({\n      id,\n      amount: Number(wager),\n      creator: walletAddressRef.current\n    });\n    socket.emit(\"joinMatch\", id);\n    setMatchStatus(\"waiting\");\n  }\n\n  // ‚îÄ‚îÄ‚îÄ acceptMatch ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n  async function acceptMatch(m) {\n    if (!connected) return alert(\"Connect wallet\");\n    setIsAccepting(true);\n    try {\n      const ix = await buildJoinAndDepositIxn(new PublicKey(m.id));\n      await wallet.sendTransaction(new Transaction().add(ix), connection);\n      setMatchStatus(\"ready\");\n      setSentence(chooseSentence(m.id));\n      setCountdown(3);\n      await fetch(`${API}/wagers/${m.id}/accept`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          accepter: walletAddressRef.current\n        })\n      });\n      setCurrentMatch({\n        ...m,\n        accepter: walletAddressRef.current\n      });\n      socket.emit(\"joinMatch\", m.id);\n    } catch (e) {\n      console.error(\"Accept error:\", e);\n      alert(\"Accept error:\\n\" + e.message);\n      setCurrentMatch(null);\n    } finally {\n      setIsAccepting(false);\n    }\n  }\n\n  // ‚îÄ‚îÄ‚îÄ cancelMatch ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n  async function cancelMatch(m) {\n    try {\n      const ix = await buildCancelIxn(new PublicKey(m.id), new PublicKey(m.creator), new PublicKey(m.accepter || m.creator));\n      await wallet.sendTransaction(new Transaction().add(ix), connection);\n      await fetch(`${API}/wagers/${m.id}/cancel`, {\n        method: \"POST\"\n      });\n      resetGame();\n    } catch (e) {\n      console.error(\"Cancel error:\", e);\n      alert(\"Cancel error:\\n\" + e.message);\n    }\n  }\n\n  // ‚îÄ‚îÄ‚îÄ handle typing & finish ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n  function handleInput(e) {\n    if (isInputDisabled) return;\n    if (e.type === \"paste\") {\n      e.preventDefault();\n      return;\n    }\n    const now = Date.now();\n    const val = e.target.value;\n    const rawProg = Math.min(1, val.length / sentence.length);\n    const deltaProg = rawProg - lastProg;\n    const deltaTime = (now - lastProgTime) / 1000;\n    const chars = deltaProg * sentence.length;\n    const cps = deltaTime > 0 ? chars / deltaTime : 0;\n    if (cps > MAX_CPS) return;\n    setLastProg(rawProg);\n    setLastProgTime(now);\n    setInputValue(val);\n    setPlayerProgress(rawProg);\n    socket.emit(\"progress\", {\n      matchId: currentMatch.id,\n      wallet: walletAddressRef.current,\n      progress: rawProg\n    });\n    if (val === sentence) {\n      fetch(`${API}/wagers/${currentMatch.id}/complete`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          winner: walletAddressRef.current\n        })\n      });\n      setMatchStatus(\"finished\");\n      setIsInputDisabled(true);\n      setRaceResult({\n        result: \"win\"\n      });\n    }\n  }\n\n  // ‚îÄ‚îÄ‚îÄ render UIs ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n  const renderMatchmaking = () => /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"matchmaking\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Create a Match\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"Wager (SOL):\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        min: \"0.01\",\n        step: \"0.01\",\n        value: wager,\n        onChange: e => setWager(Number(e.target.value))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: createMatch,\n      disabled: !wager || wager <= 0,\n      children: \"Create Match\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        marginTop: 20\n      },\n      children: \"Open Matches\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 7\n    }, this), openMatches.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No open matches. Create one!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: openMatches.map(m => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [m.id.slice(0, 6), \"\\u2026 | \", m.amount, \" SOL\", \" \", m.creator === walletAddressRef.current ? /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => cancelMatch(m),\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 17\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => acceptMatch(m),\n          disabled: !!currentMatch || isAccepting,\n          children: isAccepting ? \"Accepting‚Ä¶\" : \"Accept\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 17\n        }, this)]\n      }, m.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 360,\n    columnNumber: 5\n  }, this);\n  const renderWaiting = () => /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"waiting-section\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Waiting for opponent\\u2026\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => cancelMatch(currentMatch),\n      children: \"Cancel Match\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 422,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 420,\n    columnNumber: 5\n  }, this);\n  const renderRace = () => /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"race-section\",\n    children: [matchStatus === \"ready\" && /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Starting in \", countdown]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 9\n    }, this), matchStatus === \"racing\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sentence-display\",\n        children: sentence\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 439,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        ref: inputRef,\n        type: \"text\",\n        value: inputValue,\n        onChange: handleInput,\n        onPaste: handleInput,\n        placeholder: \"Start typing\\u2026\",\n        disabled: isInputDisabled\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"track\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lane\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"car car-player\",\n            style: {\n              left: `${playerProgress * 100}%`\n            },\n            children: \"\\uD83D\\uDE97\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 453,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lane\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"car car-opponent\",\n            style: {\n              left: `${opponentProgress * 100}%`\n            },\n            children: \"\\uD83C\\uDFCE\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 465,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), matchStatus === \"finished\" && (raceResult === null || raceResult === void 0 ? void 0 : raceResult.result) === \"win\" && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"results results-win\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          fontSize: \"2rem\"\n        },\n        children: \"\\uD83C\\uDFC6 You Won!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: async () => {\n          try {\n            const res = await fetch(`${API}/wagers/${currentMatch.id}/resolve`, {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                winner: walletAddressRef.current\n              })\n            });\n            const data = await res.json();\n            if (data.success) {\n              alert(\"Winnings claimed!\\nSignature: \" + data.signature);\n              resetGame();\n            } else {\n              throw new Error(data.error || \"Failed to claim winnings\");\n            }\n          } catch (e) {\n            console.error(\"Claim error:\", e);\n            alert(\"Payout error:\\n\" + e.message);\n          }\n        },\n        children: \"Claim Winnings\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 483,\n      columnNumber: 11\n    }, this), matchStatus === \"finished\" && (raceResult === null || raceResult === void 0 ? void 0 : raceResult.result) === \"lose\" && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"results results-lose\",\n      style: {\n        textAlign: \"center\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          fontSize: \"2rem\",\n          color: \"#c0392b\"\n        },\n        children: \"\\uD83D\\uDE22 You Lost!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 543,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Better luck next time!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 551,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: resetGame,\n        children: \"Back to Matches\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 552,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 539,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 433,\n    columnNumber: 5\n  }, this);\n  const renderChat = () => /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"chat-section\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Chat\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 562,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-messages\",\n      style: {\n        maxHeight: 150,\n        overflowY: \"auto\"\n      },\n      children: chatMessages.map((msg, i) => /*#__PURE__*/_jsxDEV(\"p\", {\n        className: msg.sender === walletAddressRef.current ? \"self\" : \"other\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: [msg.sender.slice(0, 6), \"\\u2026:\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 580,\n          columnNumber: 13\n        }, this), \" \", msg.message]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 571,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 563,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      value: chatInput,\n      onChange: e => setChatInput(e.target.value),\n      onKeyDown: e => {\n        if (e.key === \"Enter\") {\n          socket.emit(\"message\", {\n            matchId: currentMatch.id,\n            sender: walletAddressRef.current,\n            message: chatInput\n          });\n          setChatInput(\"\");\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 587,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => {\n        socket.emit(\"message\", {\n          matchId: currentMatch.id,\n          sender: walletAddressRef.current,\n          message: chatInput\n        });\n        setChatInput(\"\");\n      },\n      disabled: !chatInput.trim(),\n      children: \"Send\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 604,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 561,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Type Racer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 624,\n        columnNumber: 9\n      }, this), connected ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"wallet-info\",\n        children: [walletAddressRef.current.slice(0, 6), \"\\u2026 (\", walletBalance.toFixed(2), \" SOL)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 626,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(WalletMultiButton, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 634,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 623,\n      columnNumber: 7\n    }, this), !connected && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Please connect your wallet to play.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 639,\n      columnNumber: 9\n    }, this), connected && !currentMatch && renderMatchmaking(), connected && currentMatch && matchStatus === \"waiting\" && renderWaiting(), connected && currentMatch && (matchStatus === \"ready\" || matchStatus === \"racing\" || matchStatus === \"finished\") && renderRace(), connected && currentMatch && matchStatus === \"finished\" && renderChat()]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 622,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"UqIF5a99cXfYySOqS0SQLyAiUlI=\", false, function () {\n  return [useConnection, useWallet];\n});\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","sentences","useConnection","useWallet","WalletMultiButton","LAMPORTS_PER_SOL","PublicKey","Transaction","socket","anchor","setProvider","buildInitializeAndDepositIxns","buildJoinAndDepositIxn","buildCancelIxn","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","connection","wallet","publicKey","connected","walletAddress","toBase58","walletAddressRef","current","prov","AnchorProvider","preflightCommitment","commitment","walletBalance","setWalletBalance","getBalance","then","lamports","wager","setWager","openMatches","setOpenMatches","currentMatch","setCurrentMatch","matchStatus","setMatchStatus","sentence","setSentence","inputValue","setInputValue","playerProgress","setPlayerProgress","opponentProgress","setOpponentProgress","countdown","setCountdown","raceResult","setRaceResult","isInputDisabled","setIsInputDisabled","isAccepting","setIsAccepting","opponentWallet","setOpponentWallet","chatMessages","setChatMessages","chatInput","setChatInput","inputRef","API","process","env","REACT_APP_API_URL","lastProgTime","setLastProgTime","Date","now","lastProg","setLastProg","MAX_CPS","chooseSentence","id","Array","from","reduce","a","c","charCodeAt","length","fetchOpenMatches","res","fetch","json","resetGame","connect","on","m","os","filter","players","amount","creator","accepter","find","w","progress","winner","progressMap","result","_progressMap$walletAd","_progressMap$opponent","removeAllListeners","disconnect","t","setTimeout","clearTimeout","_inputRef$current","focus","createMatch","alert","Math","floor","ixInit","ixDeposit","escrowPda","tx","add","sig","sendTransaction","console","log","method","headers","body","JSON","stringify","Number","feePercent","vault","emit","acceptMatch","ix","e","error","message","cancelMatch","handleInput","type","preventDefault","val","target","value","rawProg","min","deltaProg","deltaTime","chars","cps","matchId","renderMatchmaking","className","children","fileName","_jsxFileName","lineNumber","columnNumber","step","onChange","onClick","disabled","style","marginTop","map","slice","renderWaiting","renderRace","ref","onPaste","placeholder","left","fontSize","data","success","signature","Error","textAlign","color","renderChat","maxHeight","overflowY","msg","i","sender","onKeyDown","key","trim","toFixed","_c","$RefreshReg$"],"sources":["/home/kokoi/sol-wager-app/frontend/src/App.jsx"],"sourcesContent":["// src/App.jsx\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport \"./App.css\";\nimport sentences from \"./sentences\";\nimport { useConnection, useWallet } from \"@solana/wallet-adapter-react\";\nimport { WalletMultiButton } from \"@solana/wallet-adapter-react-ui\";\nimport {\n  LAMPORTS_PER_SOL,\n  PublicKey,\n  Transaction,\n} from \"@solana/web3.js\";\nimport socket from \"./socket\";\nimport * as anchor from \"@coral-xyz/anchor\";\nimport { setProvider } from \"./solana\";\nimport {\n  buildInitializeAndDepositIxns,\n  buildJoinAndDepositIxn,\n  buildCancelIxn,\n} from \"./escrow\";\n\nexport default function App() {\n  const { connection } = useConnection();\n  const wallet = useWallet();\n  const { publicKey, connected } = wallet;\n  const walletAddress = publicKey?.toBase58() || \"\";\n\n  // keep a ref to the latest wallet address for socket callbacks\n  const walletAddressRef = useRef(walletAddress);\n  useEffect(() => {\n    walletAddressRef.current = walletAddress;\n  }, [walletAddress]);\n\n  // set up Anchor + provider\n  useEffect(() => {\n    if (connected && connection) {\n      const prov = new anchor.AnchorProvider(connection, wallet, {\n        preflightCommitment: \"confirmed\",\n        commitment: \"confirmed\",\n      });\n      anchor.setProvider(prov);\n      setProvider(wallet);\n    }\n  }, [connected, connection, wallet]);\n\n  // track SOL balance\n  const [walletBalance, setWalletBalance] = useState(0);\n  useEffect(() => {\n    if (connection && publicKey) {\n      connection.getBalance(publicKey).then((lamports) => {\n        setWalletBalance(lamports / LAMPORTS_PER_SOL);\n      });\n    }\n  }, [connection, publicKey]);\n\n  // game state\n  const [wager, setWager] = useState(1);\n  const [openMatches, setOpenMatches] = useState([]);\n  const [currentMatch, setCurrentMatch] = useState(null);\n  const [matchStatus, setMatchStatus] = useState(\"waiting\");\n\n  // race state\n  const [sentence, setSentence] = useState(\"\");\n  const [inputValue, setInputValue] = useState(\"\");\n  const [playerProgress, setPlayerProgress] = useState(0);\n  const [opponentProgress, setOpponentProgress] = useState(0);\n  const [countdown, setCountdown] = useState(3);\n  const [raceResult, setRaceResult] = useState(null);\n  const [isInputDisabled, setIsInputDisabled] = useState(false);\n  const [isAccepting, setIsAccepting] = useState(false);\n  const [opponentWallet, setOpponentWallet] = useState(null);\n\n  // chat\n  const [chatMessages, setChatMessages] = useState([]);\n  const [chatInput, setChatInput] = useState(\"\");\n\n  const inputRef = useRef(null);\n  const API = process.env.REACT_APP_API_URL;\n\n  // anti‚Äëcheat\n  const [lastProgTime, setLastProgTime] = useState(Date.now());\n  const [lastProg, setLastProg] = useState(0);\n  const MAX_CPS = 20;\n\n  // pick a consistent sentence based on match ID\n  const chooseSentence = (id) =>\n    sentences[\n      Array.from(id).reduce((a, c) => a + c.charCodeAt(0), 0) %\n        sentences.length\n    ];\n\n  const fetchOpenMatches = async () => {\n    try {\n      const res = await fetch(`${API}/wagers`);\n      setOpenMatches(await res.json());\n    } catch {}\n  };\n\n  const resetGame = () => {\n    setCurrentMatch(null);\n    setMatchStatus(\"waiting\");\n    setSentence(\"\");\n    setInputValue(\"\");\n    setPlayerProgress(0);\n    setOpponentProgress(0);\n    setCountdown(3);\n    setRaceResult(null);\n    setIsInputDisabled(false);\n    setOpponentWallet(null);\n    setLastProg(0);\n    setLastProgTime(Date.now());\n    fetchOpenMatches();\n  };\n\n  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ SOCKET SETUP ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n  useEffect(() => {\n    socket.connect();\n    socket.on(\"openMatches\", setOpenMatches);\n    socket.on(\"newMatch\", (m) =>\n      setOpenMatches((os) => [...os, m])\n    );\n    socket.on(\"removeMatch\", (id) =>\n      setOpenMatches((os) => os.filter((m) => m.id !== id))\n    );\n    socket.on(\"startMatch\", ({ id, players }) => {\n      if (!currentMatch || currentMatch.id !== id) {\n        setCurrentMatch({\n          id,\n          amount: currentMatch?.amount || 0,\n          creator: players[0],\n          accepter: players[1],\n        });\n      }\n      setMatchStatus(\"ready\");\n      setSentence(chooseSentence(id));\n      setCountdown(3);\n      setOpponentWallet(\n        players.find((w) => w !== walletAddressRef.current)\n      );\n    });\n    socket.on(\"opponentProgress\", ({ wallet: w, progress }) => {\n      if (w !== walletAddressRef.current)\n        setOpponentProgress(progress);\n    });\n    socket.on(\"raceEnd\", ({ winner, progressMap }) => {\n      setMatchStatus(\"finished\");\n      setIsInputDisabled(true);\n      setRaceResult({\n        result:\n          winner === walletAddressRef.current\n            ? \"win\"\n            : \"lose\",\n      });\n      if (progressMap) {\n        setPlayerProgress(\n          progressMap[walletAddressRef.current] ?? 0\n        );\n        setOpponentProgress(\n          progressMap[opponentWallet] ?? 0\n        );\n      }\n    });\n    socket.on(\"chat\", setChatMessages);\n    socket.on(\"opponentLeft\", () => {\n      resetGame();\n    });\n\n    // initial load\n    fetchOpenMatches();\n\n    return () => {\n      socket.removeAllListeners();\n      socket.disconnect();\n    };\n  }, []); // run once\n\n  // countdown to race start\n  useEffect(() => {\n    if (matchStatus === \"ready\" && countdown > 0) {\n      const t = setTimeout(\n        () => setCountdown((c) => c - 1),\n        1000\n      );\n      return () => clearTimeout(t);\n    } else if (\n      matchStatus === \"ready\" &&\n      countdown === 0\n    ) {\n      setMatchStatus(\"racing\");\n      setIsInputDisabled(false);\n      inputRef.current?.focus();\n    }\n  }, [countdown, matchStatus]);\n\n  // ‚îÄ‚îÄ‚îÄ createMatch ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n  async function createMatch() {\n    if (!connected) return alert(\"Connect wallet\");\n    const lamports = Math.floor(\n      wager * LAMPORTS_PER_SOL\n    );\n\n    // only pass wagerLamports here\n    const { ixInit, ixDeposit, escrowPda } =\n      await buildInitializeAndDepositIxns(lamports);\n\n    const tx = new Transaction().add(ixInit, ixDeposit);\n    const sig = await wallet.sendTransaction(\n      tx,\n      connection\n    );\n    console.log(\"createMatch tx:\", sig);\n\n    // register with backend\n    const id = escrowPda.toBase58();\n    await fetch(`${API}/wagers`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        id,\n        amount: Number(wager),\n        creator: walletAddressRef,\n        feePercent: 5,\n        vault: escrowPda.toBase58(),\n      }),\n    });\n    setCurrentMatch({\n      id,\n      amount: Number(wager),\n      creator: walletAddressRef.current,\n    });\n    socket.emit(\"joinMatch\", id);\n    setMatchStatus(\"waiting\");\n  }\n\n  // ‚îÄ‚îÄ‚îÄ acceptMatch ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n  async function acceptMatch(m) {\n    if (!connected) return alert(\"Connect wallet\");\n    setIsAccepting(true);\n    try {\n      const ix = await buildJoinAndDepositIxn(\n        new PublicKey(m.id)\n      );\n      await wallet.sendTransaction(\n        new Transaction().add(ix),\n        connection\n      );\n\n      setMatchStatus(\"ready\");\n      setSentence(chooseSentence(m.id));\n      setCountdown(3);\n\n      await fetch(\n        `${API}/wagers/${m.id}/accept`,\n        {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({\n            accepter: walletAddressRef.current,\n          }),\n        }\n      );\n      setCurrentMatch({\n        ...m,\n        accepter: walletAddressRef.current,\n      });\n      socket.emit(\"joinMatch\", m.id);\n    } catch (e) {\n      console.error(\"Accept error:\", e);\n      alert(\"Accept error:\\n\" + e.message);\n      setCurrentMatch(null);\n    } finally {\n      setIsAccepting(false);\n    }\n  }\n\n  // ‚îÄ‚îÄ‚îÄ cancelMatch ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n  async function cancelMatch(m) {\n    try {\n      const ix = await buildCancelIxn(\n        new PublicKey(m.id),\n        new PublicKey(m.creator),\n        new PublicKey(m.accepter || m.creator)\n      );\n      await wallet.sendTransaction(\n        new Transaction().add(ix),\n        connection\n      );\n\n      await fetch(\n        `${API}/wagers/${m.id}/cancel`,\n        {\n          method: \"POST\",\n        }\n      );\n      resetGame();\n    } catch (e) {\n      console.error(\"Cancel error:\", e);\n      alert(\"Cancel error:\\n\" + e.message);\n    }\n  }\n\n  // ‚îÄ‚îÄ‚îÄ handle typing & finish ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n  function handleInput(e) {\n    if (isInputDisabled) return;\n    if (e.type === \"paste\") {\n      e.preventDefault();\n      return;\n    }\n    const now = Date.now();\n    const val = e.target.value;\n    const rawProg = Math.min(\n      1,\n      val.length / sentence.length\n    );\n    const deltaProg = rawProg - lastProg;\n    const deltaTime = (now - lastProgTime) / 1000;\n    const chars = deltaProg * sentence.length;\n    const cps =\n      deltaTime > 0 ? chars / deltaTime : 0;\n    if (cps > MAX_CPS) return;\n\n    setLastProg(rawProg);\n    setLastProgTime(now);\n    setInputValue(val);\n    setPlayerProgress(rawProg);\n\n    socket.emit(\"progress\", {\n      matchId: currentMatch.id,\n      wallet: walletAddressRef.current,\n      progress: rawProg,\n    });\n\n    if (val === sentence) {\n      fetch(\n        `${API}/wagers/${currentMatch.id}/complete`,\n        {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\":\n              \"application/json\",\n          },\n          body: JSON.stringify({\n            winner:\n              walletAddressRef.current,\n          }),\n        }\n      );\n      setMatchStatus(\"finished\");\n      setIsInputDisabled(true);\n      setRaceResult({ result: \"win\" });\n    }\n  }\n\n  // ‚îÄ‚îÄ‚îÄ render UIs ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n  const renderMatchmaking = () => (\n    <section className=\"matchmaking\">\n      <h2>Create a Match</h2>\n      <label>\n        Wager (SOL):\n        <input\n          type=\"number\"\n          min=\"0.01\"\n          step=\"0.01\"\n          value={wager}\n          onChange={(e) =>\n            setWager(Number(e.target.value))\n          }\n        />\n      </label>\n      <button\n        onClick={createMatch}\n        disabled={!wager || wager <= 0}\n      >\n        Create Match\n      </button>\n      <h2 style={{ marginTop: 20 }}>\n        Open Matches\n      </h2>\n      {openMatches.length === 0 ? (\n        <p>No open matches. Create one!</p>\n      ) : (\n        <ul>\n          {openMatches.map((m) => (\n            <li key={m.id}>\n              {m.id.slice(0, 6)}‚Ä¶ | {m.amount} SOL{\" \"}\n              {m.creator ===\n              walletAddressRef.current ? (\n                <button\n                  onClick={() => cancelMatch(m)}\n                >\n                  Cancel\n                </button>\n              ) : (\n                <button\n                  onClick={() =>\n                    acceptMatch(m)\n                  }\n                  disabled={\n                    !!currentMatch ||\n                    isAccepting\n                  }\n                >\n                  {isAccepting\n                    ? \"Accepting‚Ä¶\"\n                    : \"Accept\"}\n                </button>\n              )}\n            </li>\n          ))}\n        </ul>\n      )}\n    </section>\n  );\n\n  const renderWaiting = () => (\n    <section className=\"waiting-section\">\n      <h2>Waiting for opponent‚Ä¶</h2>\n      <button\n        onClick={() =>\n          cancelMatch(currentMatch)\n        }\n      >\n        Cancel Match\n      </button>\n    </section>\n  );\n\n  const renderRace = () => (\n    <section className=\"race-section\">\n      {matchStatus === \"ready\" && (\n        <h2>Starting in {countdown}</h2>\n      )}\n      {matchStatus === \"racing\" && (\n        <>\n          <div className=\"sentence-display\">\n            {sentence}\n          </div>\n          <input\n            ref={inputRef}\n            type=\"text\"\n            value={inputValue}\n            onChange={handleInput}\n            onPaste={handleInput}\n            placeholder=\"Start typing‚Ä¶\"\n            disabled={isInputDisabled}\n          />\n          <div className=\"track\">\n            <div className=\"lane\">\n              <div\n                className=\"car car-player\"\n                style={{\n                  left: `${\n                    playerProgress * 100\n                  }%`,\n                }}\n              >\n                üöó\n              </div>\n            </div>\n            <div className=\"lane\">\n              <div\n                className=\"car car-opponent\"\n                style={{\n                  left: `${\n                    opponentProgress *\n                    100\n                  }%`,\n                }}\n              >\n                üèéÔ∏è\n              </div>\n            </div>\n          </div>\n        </>\n      )}\n      {matchStatus === \"finished\" &&\n        raceResult?.result ===\n          \"win\" && (\n          <div className=\"results results-win\">\n            <h2\n              style={{ fontSize: \"2rem\" }}\n            >\n              üèÜ You Won!\n            </h2>\n            <button\n              onClick={async () => {\n                try {\n                  const res = await fetch(\n                    `${API}/wagers/${currentMatch.id}/resolve`,\n                    {\n                      method: \"POST\",\n                      headers: {\n                        \"Content-Type\":\n                          \"application/json\",\n                      },\n                      body: JSON.stringify({\n                        winner:\n                          walletAddressRef.current,\n                      }),\n                    }\n                  );\n                  const data =\n                    await res.json();\n                  if (data.success) {\n                    alert(\n                      \"Winnings claimed!\\nSignature: \" +\n                        data.signature\n                    );\n                    resetGame();\n                  } else {\n                    throw new Error(\n                      data.error ||\n                        \"Failed to claim winnings\"\n                    );\n                  }\n                } catch (e) {\n                  console.error(\n                    \"Claim error:\",\n                    e\n                  );\n                  alert(\n                    \"Payout error:\\n\" +\n                      e.message\n                  );\n                }\n              }}\n            >\n              Claim Winnings\n            </button>\n          </div>\n        )}\n      {matchStatus === \"finished\" &&\n        raceResult?.result ===\n          \"lose\" && (\n          <div\n            className=\"results results-lose\"\n            style={{ textAlign: \"center\" }}\n          >\n            <h2\n              style={{\n                fontSize: \"2rem\",\n                color: \"#c0392b\",\n              }}\n            >\n              üò¢ You Lost!\n            </h2>\n            <p>Better luck next time!</p>\n            <button onClick={resetGame}>\n              Back to Matches\n            </button>\n          </div>\n        )}\n    </section>\n  );\n\n  const renderChat = () => (\n    <section className=\"chat-section\">\n      <h2>Chat</h2>\n      <div\n        className=\"chat-messages\"\n        style={{\n          maxHeight: 150,\n          overflowY: \"auto\",\n        }}\n      >\n        {chatMessages.map((msg, i) => (\n          <p\n            key={i}\n            className={\n              msg.sender ===\n              walletAddressRef.current\n                ? \"self\"\n                : \"other\"\n            }\n          >\n            <strong>\n              {msg.sender.slice(0, 6)}‚Ä¶:\n            </strong>{\" \"}\n            {msg.message}\n          </p>\n        ))}\n      </div>\n      <input\n        value={chatInput}\n        onChange={(e) =>\n          setChatInput(e.target.value)\n        }\n        onKeyDown={(e) => {\n          if (e.key === \"Enter\") {\n            socket.emit(\"message\", {\n              matchId: currentMatch.id,\n              sender:\n                walletAddressRef.current,\n              message: chatInput,\n            });\n            setChatInput(\"\");\n          }\n        }}\n      />\n      <button\n        onClick={() => {\n          socket.emit(\"message\", {\n            matchId: currentMatch.id,\n            sender:\n              walletAddressRef.current,\n            message: chatInput,\n          });\n          setChatInput(\"\");\n        }}\n        disabled={!chatInput.trim()}\n      >\n        Send\n      </button>\n    </section>\n  );\n\n  return (\n    <div className=\"app\">\n      <header>\n        <h1>Type Racer</h1>\n        {connected ? (\n          <div className=\"wallet-info\">\n            {walletAddressRef.current.slice(\n              0,\n              6\n            )}\n            ‚Ä¶ ({walletBalance.toFixed(2)} SOL)\n          </div>\n        ) : (\n          <WalletMultiButton />\n        )}\n      </header>\n\n      {!connected && (\n        <p>Please connect your wallet to play.</p>\n      )}\n      {connected && !currentMatch &&\n        renderMatchmaking()}\n      {connected &&\n        currentMatch &&\n        matchStatus === \"waiting\" &&\n        renderWaiting()}\n      {connected &&\n        currentMatch &&\n        (matchStatus === \"ready\" ||\n          matchStatus === \"racing\" ||\n          matchStatus === \"finished\") &&\n        renderRace()}\n      {connected &&\n        currentMatch &&\n        matchStatus === \"finished\" &&\n        renderChat()}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}